(function() {
  jQuery(document).ready(function($) {
    window.svgData = {
      'image': '',
      'data': [
        {
          'id': 1,
          'type': 'villa',
          'name': 'Villa 1',
          'canvas_type': 'polygon',
          'details': {
            'class': 'marked'
          },
          'points': ["359", "332", "418", "365", "345", "359"]
        }, {
          'id': 2,
          'type': 'villa',
          'name': 'Villa 2',
          'canvas_type': '',
          'details': '',
          'points': []
        }, {
          'id': 3,
          'type': 'villa',
          'name': 'Villa 3',
          'canvas_type': 'polygon',
          'details': {
            'class': 'marked'
          },
          'points': ["425", "485", "459", "501", "457", "547", "408", "550"]
        }, {
          'id': 4,
          'type': 'villa',
          'name': 'Villa 4',
          'canvas_type': 'polygon',
          'details': {
            'class': 'marked'
          },
          'points': ["629", "490", "667", "476", "704", "474", "709", "499", "706", "536", "635", "539"]
        }, {
          'id': 5,
          'type': 'villa',
          'name': 'Villa 5',
          'canvas_type': '',
          'details': '',
          'points': []
        }, {
          'id': 6,
          'type': 'building',
          'name': 'Building 1',
          'canvas_type': '',
          'details': '',
          'points': []
        }
      ],
      'supported_types': ['villa', 'building']
    };
    window.createSvg = function(svgData) {
      window.rawSvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      rawSvg.setAttribute('id', 'Layer_1');
      rawSvg.setAttribute('style', 'border: 1px solid black');
      rawSvg.setAttribute('width', '100%');
      rawSvg.setAttribute('height', '100%');
      rawSvg.setAttributeNS(null, 'x', '0');
      rawSvg.setAttributeNS(null, 'y', '0');
      rawSvg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
      window.createImageTag();
      return $.each(svgData, function(index, value) {
        var tag;
        if (value.canvas_type === 'polygon') {
          tag = window.polygon.createPolgyonTag(value);
          if (tag !== "") {
            rawSvg.appendChild(tag);
          }
        }
        if (value.type === 'marker') {
          return window.marker.createMarkerTag(value);
        }
      });
    };
    window.createImageTag = function() {
      var svgimg;
      svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');
      svgimg.setAttributeNS(null, 'height', '100%');
      svgimg.setAttributeNS(null, 'width', '100%');
      svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', svgImg);
      svgimg.setAttributeNS(null, 'x', '0');
      svgimg.setAttributeNS(null, 'y', '0');
      svgimg.setAttributeNS(null, 'visibility', 'visible');
      return rawSvg.appendChild(svgimg);
    };
    window.createPanel = function(data) {
      return $.each(data, function(index, value) {
        return $('.' + value).removeClass('hidden');
      });
    };
    window.makeDraggable = function(data) {
      var element;
      element = draw.polygon(data);
      return element.draggable();
    };
    window.getPendingObjects = function(svgData) {
      var collection, supportedTypes, type;
      type = [];
      collection = new Backbone.Collection(svgData.data);
      supportedTypes = svgData.supported_types;
      supportedTypes = _.uniq(supportedTypes);
      $.each(supportedTypes, function(index, value) {
        var items, marked;
        items = collection.where({
          'type': value
        });
        marked = [];
        $.each(items, function(ind, val) {
          if (!_.isEmpty(val.get('canvas_type'))) {
            return marked.push(val);
          }
        });
        return type.push({
          'name': value,
          'id': value,
          'total': items.length,
          'marked': marked.length
        });
      });
      $.each(type, function(index, value) {
        if (value.total === 0) {
          return type = _.without(type, value);
        }
      });
      return type;
    };
    return window.showPendingObjects = function(data) {
      var html;
      html = '';
      $.each(data, function(index, value) {
        return html += '<strong class="pull-right" style="line-height:70px;margin-right: 20px;  color: #FF7E00;">' + 'Marked: ' + value.marked + ' ' + value.name + '(s) | Total : ' + value.total + ' ' + value.name + '(s)</strong>';
      });
      return $('.pending').html(html);
    };
  });

}).call(this);

//# sourceMappingURL=../authoring-tool/common.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  CommonFloor.Project = (function(superClass) {
    extend(Project, superClass);

    function Project() {
      return Project.__super__.constructor.apply(this, arguments);
    }

    Project.prototype.urlRoot = function() {
      return BASERESTURL + '/project/' + this.project_id;
    };

    Project.prototype.parse = function(response) {
      var resp;
      resp = response.data;
      return resp;
    };

    Project.prototype.setProjectAttributes = function(project_id) {
      this.project_id = project_id;
      if (jQuery.isEmptyObject(this.toJSON()) || parseInt(this.get('id')) !== parseInt(project_id)) {
        return this.fetch({
          async: false,
          success: (function(_this) {
            return function(collection, response) {
              if (response === 0 || jQuery.isEmptyObject(response)) {
                return _this.clear();
              }
            };
          })(this)
        });
      }
    };

    Project.prototype.resetEntitites = function() {
      unitCollection.reset();
      return settings.clear();
    };

    Project.prototype.checkRotationView = function() {
      var breakpoints, transitionImages;
      transitionImages = [];
      breakpoints = project.get('breakpoints');
      if (parseInt(breakpoints.length) > 1) {
        this.set('rotation', 1);
      } else {
        this.set('rotation', 0);
      }
      return this.get('rotation');
    };

    return Project;

  })(Backbone.Model);

  window.project = new CommonFloor.Project;

}).call(this);

//# sourceMappingURL=../../frontend/entities/project.entity.js.map
(function() {
  var BunglowVariant, BunglowVariantCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  BunglowVariant = (function(superClass) {
    extend(BunglowVariant, superClass);

    function BunglowVariant() {
      return BunglowVariant.__super__.constructor.apply(this, arguments);
    }

    BunglowVariant.prototype.findUnitPrice = function(unit_model) {
      var basicCost;
      basicCost = "";
      if (!(unit_model instanceof Backbone.Model) || unit_model === "") {
        return;
      }
      basicCost = unit_model.get('selling_amount');
      return basicCost;
    };

    return BunglowVariant;

  })(Backbone.Model);

  BunglowVariantCollection = (function(superClass) {
    extend(BunglowVariantCollection, superClass);

    function BunglowVariantCollection() {
      return BunglowVariantCollection.__super__.constructor.apply(this, arguments);
    }

    BunglowVariantCollection.prototype.model = BunglowVariant;

    BunglowVariantCollection.prototype.setBunglowVariantAttributes = function(data) {
      bunglowVariantCollection.reset(data);
      return bunglowVariantMasterCollection.reset(data);
    };

    BunglowVariantCollection.prototype.getBunglowUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      bunglowVariantCollection.each(function(model) {
        var bunglowUnits;
        bunglowUnits = unitCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(bunglowUnits);
      });
      $.each(units, function(index, value) {
        return newUnits = $.merge(newUnits, value);
      });
      return newUnits;
    };

    BunglowVariantCollection.prototype.getBunglowMasterUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      bunglowVariantMasterCollection.each(function(model) {
        var bunglowUnits;
        bunglowUnits = unitMasterCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(bunglowUnits);
      });
      $.each(units, function(index, value) {
        return newUnits = $.merge(newUnits, value);
      });
      return newUnits;
    };

    BunglowVariantCollection.prototype.getVillaUnitTypes = function() {
      var unit_types;
      unit_types = [];
      bunglowVariantMasterCollection.each(function(item) {
        var unitTypeModel;
        unitTypeModel = unitTypeMasterCollection.findWhere({
          'id': item.get('unit_type_id')
        });
        if ($.inArray(item.get('unit_type_id'), unit_types) === -1) {
          return unit_types.push(parseInt(unitTypeModel.get('id')));
        }
      });
      return unit_types;
    };

    BunglowVariantCollection.prototype.getVillaAttributes = function() {
      var attributes;
      attributes = [];
      bunglowVariantMasterCollection.each(function(item) {
        return $.each(item.get('variant_attributes'), function(index, value) {
          if (_.isArray(value)) {
            return $.each(value, function(ind, val) {
              if ($.inArray(val, attributes) === -1) {
                return attributes.push(val);
              }
            });
          } else {
            if ($.inArray(value, attributes) === -1) {
              return attributes.push(value);
            }
          }
        });
      });
      return attributes;
    };

    return BunglowVariantCollection;

  })(Backbone.Collection);

  window.bunglowVariantCollection = new BunglowVariantCollection;

  window.bunglowVariantMasterCollection = new BunglowVariantCollection;

  window.bunglowVariant = new BunglowVariant;

}).call(this);

//# sourceMappingURL=../../frontend/entities/bunglow.variant.js.map
(function() {
  var Settings,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Settings = (function(superClass) {
    extend(Settings, superClass);

    function Settings() {
      return Settings.__super__.constructor.apply(this, arguments);
    }

    Settings.prototype.generateFloorRise = function(building) {
      var buildingModel, cost, floorrise, floors, i, sum;
      if (building === "") {
        return;
      }
      buildingModel = buildingMasterCollection.findWhere({
        'id': building
      });
      i = 0;
      floors = buildingModel.get('no_of_floors');
      floorrise = [];
      cost = settings.get('floor_rise');
      sum = 0 + cost;
      while (i < 1) {
        floorrise[i] = 0;
        i++;
      }
      while (i <= floors) {
        floorrise[i] = sum;
        sum = sum + cost;
        i++;
      }
      return floorrise;
    };

    Settings.prototype.setSettingsAttributes = function(data) {
      return settings.set(data);
    };

    return Settings;

  })(Backbone.Model);

  window.settings = new Settings;

}).call(this);

//# sourceMappingURL=../../frontend/entities/settings.entity.js.map
(function() {
  var Unit, UnitCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Unit = (function(superClass) {
    extend(Unit, superClass);

    function Unit() {
      return Unit.__super__.constructor.apply(this, arguments);
    }

    Unit.prototype.getUnitDetails = function(unit_id) {
      var attributes, id, price, type, unit, unitType, unitTypeModel, unitVariant;
      id = parseInt(unit_id);
      unit = unitMasterCollection.findWhere({
        id: id
      });
      unitVariant = 0;
      type = '';
      price = 0;
      attributes = [];
      if (bunglowVariantMasterCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = bunglowVariantMasterCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        type = 'villa';
        price = window.bunglowVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      } else if (apartmentVariantMasterCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = apartmentVariantMasterCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        unitTypeModel = unitTypeMasterCollection.findWhere({
          'id': parseInt(unitVariant.get('unit_type_id'))
        });
        type = 'apartment';
        if (window.propertyTypes[unitTypeModel.get('property_type_id')] === 'Penthouses') {
          type = 'Penthouse';
        }
        price = window.apartmentVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      } else if (plotVariantMasterCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = plotVariantMasterCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        unitVariant.set('super_built_up_area', unitVariant.get('size'));
        type = 'plot';
        price = window.plotVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      }
      unitType = unitTypeMasterCollection.findWhere({
        'id': unit.get('unit_type_id')
      });
      return [unitVariant, unitType, type, price, attributes];
    };

    Unit.prototype.getFilterUnitDetails = function(unit_id) {
      var attributes, id, price, type, unit, unitType, unitVariant;
      id = parseInt(unit_id);
      unit = unitCollection.findWhere({
        id: id
      });
      unitVariant = 0;
      type = '';
      price = 0;
      attributes = [];
      if (bunglowVariantCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = bunglowVariantCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        type = 'villa';
        price = window.bunglowVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      } else if (apartmentVariantCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = apartmentVariantCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        type = 'apartment';
        price = window.apartmentVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      } else if (plotVariantCollection.get(unit.get('unit_variant_id')) !== void 0) {
        unitVariant = plotVariantCollection.findWhere({
          'id': unit.get('unit_variant_id')
        });
        unitVariant.set('super_built_up_area', unitVariant.get('size'));
        type = 'plot';
        price = window.plotVariant.findUnitPrice(unit);
        attributes = unitVariant.get('variant_attributes');
      }
      unitType = unitTypeMasterCollection.findWhere({
        'id': unit.get('unit_type_id')
      });
      return [unitVariant, unitType, type, price, attributes];
    };

    return Unit;

  })(Backbone.Model);

  UnitCollection = (function(superClass) {
    extend(UnitCollection, superClass);

    function UnitCollection() {
      return UnitCollection.__super__.constructor.apply(this, arguments);
    }

    UnitCollection.prototype.model = Unit;

    UnitCollection.prototype.getRecord = function() {
      return this.currentModel;
    };

    UnitCollection.prototype.setRecord = function(model) {
      return this.currentModel = model;
    };

    UnitCollection.prototype.next = function() {
      var first, next, record, units;
      units = _.pluck(this.toArray(), 'id');
      next = this.at(this.indexOf(this.getRecord()) + 1);
      if (_.isUndefined(next)) {
        first = _.first(units);
        if (this.currentModel.get('id') === first) {
          return next;
        } else {
          record = this.findWhere({
            'id': first
          });
          return record;
        }
      } else {
        return next;
      }
    };

    UnitCollection.prototype.prev = function() {
      var last, prev, record, units;
      units = _.pluck(this.toArray(), 'id');
      prev = this.at(this.indexOf(this.getRecord()) - 1);
      if (_.isUndefined(prev)) {
        last = _.last(units);
        if (this.currentModel.get('id') === last) {
          return prev;
        } else {
          record = this.findWhere({
            'id': last
          });
          return record;
        }
      } else {
        return prev;
      }
    };

    UnitCollection.prototype.setUnitAttributes = function(data) {
      var response;
      response = this.setUnitType(data);
      unitCollection.reset(response);
      unitMasterCollection.reset(response);
      return window.unitTempCollection = unitCollection.clone();
    };

    UnitCollection.prototype.setUnitType = function(data) {
      $.each(data, function(index, value) {
        var unitType, unitVariant;
        unitVariant = '';
        if (bunglowVariantCollection.get(value.unit_variant_id) !== void 0) {
          unitVariant = bunglowVariantCollection.findWhere({
            'id': value.unit_variant_id
          });
        }
        if (apartmentVariantCollection.get(value.unit_variant_id) !== void 0) {
          unitVariant = apartmentVariantCollection.findWhere({
            'id': value.unit_variant_id
          });
        }
        if (plotVariantCollection.get(value.unit_variant_id) !== void 0) {
          unitVariant = plotVariantCollection.findWhere({
            'id': value.unit_variant_id
          });
          unitVariant.set('super_built_up_area', unitVariant.get('size'));
        }
        unitType = unitTypeCollection.findWhere({
          'id': unitVariant.get('unit_type_id')
        });
        value['unit_type_id'] = unitType.get('id');
        return value['area'] = unitVariant.get('super_built_up_area');
      });
      return data;
    };

    return UnitCollection;

  })(Backbone.Collection);

  window.unitCollection = new UnitCollection;

  window.unitMasterCollection = new UnitCollection;

  window.unit = new Unit;

}).call(this);

//# sourceMappingURL=../../frontend/entities/unit.entity.js.map
(function() {
  var UnitType, UnitTypeCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  UnitType = (function(superClass) {
    extend(UnitType, superClass);

    function UnitType() {
      return UnitType.__super__.constructor.apply(this, arguments);
    }

    return UnitType;

  })(Backbone.Model);

  UnitTypeCollection = (function(superClass) {
    extend(UnitTypeCollection, superClass);

    function UnitTypeCollection() {
      return UnitTypeCollection.__super__.constructor.apply(this, arguments);
    }

    UnitTypeCollection.prototype.model = UnitType;

    UnitTypeCollection.prototype.setUnitTypeAttributes = function(data) {
      unitTypeCollection.reset(data);
      return unitTypeMasterCollection.reset(data);
    };

    return UnitTypeCollection;

  })(Backbone.Collection);

  window.unitTypeCollection = new UnitTypeCollection;

  window.unitTypeMasterCollection = new UnitTypeCollection;

}).call(this);

//# sourceMappingURL=../../frontend/entities/unitType.entity.js.map
(function() {
  var Building, BuildingCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Building = (function(superClass) {
    extend(Building, superClass);

    function Building() {
      return Building.__super__.constructor.apply(this, arguments);
    }

    Building.prototype.getUnitTypes = function(building_id) {
      var unitTypes, units, variants;
      unitTypes = [];
      if (building_id === "") {
        return unitTypes;
      }
      units = unitCollection.where({
        'building_id': parseInt(building_id)
      });
      units = new Backbone.Collection(units);
      variants = units.pluck("unit_variant_id");
      $.each(variants, function(index, value) {
        var varinatModel;
        varinatModel = apartmentVariantCollection.findWhere({
          'id': parseInt(value)
        });
        return unitTypes.push(varinatModel.get('unit_type_id'));
      });
      unitTypes = _.uniq(unitTypes);
      return unitTypes;
    };

    Building.prototype.getUnitTypesCount = function(building_id, unitTypes) {
      var types;
      types = [];
      if (building_id === "") {
        return types;
      }
      $.each(unitTypes, function(ind, val) {
        var unitTypeModel, units, variants;
        unitTypeModel = unitTypeCollection.findWhere({
          'id': val
        });
        variants = apartmentVariantCollection.where({
          'unit_type_id': val
        });
        units = [];
        $.each(variants, function(index, value) {
          var unitsColl;
          unitsColl = unitCollection.where({
            'unit_variant_id': value.get('id'),
            'building_id': building_id
          });
          return $.merge(units, unitsColl);
        });
        return types.push({
          'name': unitTypeModel.get('name'),
          'units': units.length
        });
      });
      return types;
    };

    Building.prototype.getMinimumArea = function(building_id) {
      var min, temp, units;
      if (building_id === "") {
        return;
      }
      units = unitCollection.where({
        'building_id': building_id
      });
      temp = [];
      $.each(units, function(index, value) {
        var variants;
        variants = apartmentVariantCollection.findWhere({
          'id': value.get('unit_variant_id')
        });
        return temp.push(variants.get('super_built_up_area'));
      });
      min = 0;
      if (temp.length !== 0) {
        min = _.min(temp);
      }
      return min;
    };

    Building.prototype.getMinimumCost = function(building_id) {
      var min, temp, units;
      if (building_id === "") {
        return;
      }
      units = unitCollection.where({
        'building_id': building_id
      });
      temp = [];
      $.each(units, function(index, value) {
        units = unit.getUnitDetails(value.get('id'));
        return temp.push(units[3]);
      });
      min = 0;
      if (temp.length !== 0) {
        min = _.min(temp);
      }
      return min;
    };

    Building.prototype.getBuildingUnits = function(building_id) {
      var units, unitsFloor, unitsPosition;
      if (building_id === "") {
        return;
      }
      units = unitCollection.where({
        'building_id': building_id
      });
      unitsFloor = _.sortBy(units, function(num) {
        return num.get('floor');
      });
      unitsPosition = _.sortBy(unitsFloor, function(num) {
        return num.get('position');
      });
      return units;
    };

    Building.prototype.checkRotationView = function(building) {
      var breakpoints, buildingModel, transitionImages;
      if (building === "") {
        return;
      }
      transitionImages = [];
      buildingModel = buildingCollection.findWhere({
        'id': parseInt(building)
      });
      breakpoints = buildingModel.get('breakpoints');
      if (parseInt(breakpoints.length) > 1) {
        this.set('rotation', 1);
      } else {
        this.set('rotation', 0);
      }
      return this.get('rotation');
    };

    return Building;

  })(Backbone.Model);

  BuildingCollection = (function(superClass) {
    extend(BuildingCollection, superClass);

    function BuildingCollection() {
      return BuildingCollection.__super__.constructor.apply(this, arguments);
    }

    BuildingCollection.prototype.model = Building;

    BuildingCollection.prototype.getRecord = function() {
      return this.currentModel;
    };

    BuildingCollection.prototype.setRecord = function(model) {
      return this.currentModel = model;
    };

    BuildingCollection.prototype.next = function() {
      var first, next, record, units;
      units = _.pluck(this.toArray(), 'id');
      next = this.at(this.indexOf(this.getRecord()) + 1);
      if (_.isUndefined(next)) {
        first = _.first(units);
        if (this.currentModel.get('id') === first) {
          return next;
        } else {
          record = this.findWhere({
            'id': first
          });
          return record;
        }
      } else {
        return next;
      }
    };

    BuildingCollection.prototype.prev = function() {
      var last, prev, record, units;
      units = _.pluck(this.toArray(), 'id');
      prev = this.at(this.indexOf(this.getRecord()) - 1);
      if (_.isUndefined(prev)) {
        last = _.last(units);
        if (this.currentModel.get('id') === last) {
          return prev;
        } else {
          record = this.findWhere({
            'id': last
          });
          return record;
        }
      } else {
        return prev;
      }
    };

    BuildingCollection.prototype.setBuildingAttributes = function(data) {
      buildingCollection.reset(data);
      return buildingMasterCollection.reset(data);
    };

    return BuildingCollection;

  })(Backbone.Collection);

  window.buildingCollection = new BuildingCollection;

  window.buildingMasterCollection = new BuildingCollection;

  window.building = new Building;

}).call(this);

//# sourceMappingURL=../../frontend/entities/building.entity.js.map
(function() {
  var ApartmentVariant, ApartmentVariantCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  ApartmentVariant = (function(superClass) {
    extend(ApartmentVariant, superClass);

    function ApartmentVariant() {
      return ApartmentVariant.__super__.constructor.apply(this, arguments);
    }

    ApartmentVariant.prototype.findUnitPrice = function(unitModel) {
      var basicCost;
      basicCost = 0.00;
      if (!(unitModel instanceof Backbone.Model) || unitModel === "") {
        return;
      }
      basicCost = unitModel.get('selling_amount');
      return basicCost;
    };

    return ApartmentVariant;

  })(Backbone.Model);

  ApartmentVariantCollection = (function(superClass) {
    extend(ApartmentVariantCollection, superClass);

    function ApartmentVariantCollection() {
      return ApartmentVariantCollection.__super__.constructor.apply(this, arguments);
    }

    ApartmentVariantCollection.prototype.model = ApartmentVariant;

    ApartmentVariantCollection.prototype.setApartmentVariantAttributes = function(data) {
      apartmentVariantCollection.reset(data);
      return apartmentVariantMasterCollection.reset(data);
    };

    ApartmentVariantCollection.prototype.getApartmentUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      apartmentVariantCollection.each(function(model) {
        var apartmentUnits;
        apartmentUnits = unitCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(apartmentUnits);
      });
      if (units.length !== 0) {
        $.each(units[0], function(index, value) {
          var property, unitType;
          unitType = unitTypeMasterCollection.findWhere({
            'id': value.get('unit_type_id')
          });
          property = window.propertyTypes[unitType.get('property_type_id')];
          if (s.decapitalize(property) === 'apartments') {
            return newUnits.push(value);
          }
        });
      }
      return newUnits;
    };

    ApartmentVariantCollection.prototype.getPenthouseUnits = function() {
      var units;
      units = [];
      unitCollection.each(function(model) {
        var property, unitType;
        unitType = unitTypeMasterCollection.findWhere({
          'id': model.get('unit_type_id')
        });
        property = window.propertyTypes[unitType.get('property_type_id')];
        if (s.decapitalize(property) === 'penthouses') {
          return units.push(model);
        }
      });
      return units;
    };

    ApartmentVariantCollection.prototype.getApartmentMasterUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      apartmentVariantMasterCollection.each(function(model) {
        var apartmentUnits;
        apartmentUnits = unitMasterCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(apartmentUnits);
      });
      $.each(units, function(index, value) {
        return newUnits = $.merge(newUnits, value);
      });
      return newUnits;
    };

    ApartmentVariantCollection.prototype.getApartmentUnitTypes = function() {
      var unit_types;
      unit_types = [];
      apartmentVariantMasterCollection.each(function(item) {
        var unitTypeModel;
        unitTypeModel = unitTypeMasterCollection.findWhere({
          'id': item.get('unit_type_id')
        });
        if ($.inArray(item.get('unit_type_id'), unit_types) === -1) {
          return unit_types.push(parseInt(unitTypeModel.get('id')));
        }
      });
      return unit_types;
    };

    ApartmentVariantCollection.prototype.getApartmentAttributes = function() {
      var attributes, types;
      attributes = [];
      types = [];
      apartmentVariantMasterCollection.each(function(item) {
        return $.each(item.get('variant_attributes'), function(index, value) {
          if (_.isArray(value)) {
            return $.each(value, function(ind, val) {
              if ($.inArray(val, attributes) === -1) {
                return attributes.push(val);
              }
            });
          } else {
            if ($.inArray(value, attributes) === -1) {
              return attributes.push(value);
            }
          }
        });
      });
      return [attributes];
    };

    return ApartmentVariantCollection;

  })(Backbone.Collection);

  window.apartmentVariantCollection = new ApartmentVariantCollection;

  window.apartmentVariantMasterCollection = new ApartmentVariantCollection;

  window.apartmentVariant = new ApartmentVariant;

}).call(this);

//# sourceMappingURL=../../frontend/entities/apartment.variant.entity.js.map
(function() {
  var FloorLayout, FloorLayoutCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  FloorLayout = (function(superClass) {
    extend(FloorLayout, superClass);

    function FloorLayout() {
      return FloorLayout.__super__.constructor.apply(this, arguments);
    }

    return FloorLayout;

  })(Backbone.Model);

  FloorLayoutCollection = (function(superClass) {
    extend(FloorLayoutCollection, superClass);

    function FloorLayoutCollection() {
      return FloorLayoutCollection.__super__.constructor.apply(this, arguments);
    }

    FloorLayoutCollection.prototype.model = FloorLayout;

    FloorLayoutCollection.prototype.setFloorLayoutAttributes = function(data) {
      return floorLayoutCollection.reset(data);
    };

    return FloorLayoutCollection;

  })(Backbone.Collection);

  window.floorLayoutCollection = new FloorLayoutCollection;

}).call(this);

//# sourceMappingURL=../../frontend/entities/floor.layout.entity.js.map
(function() {
  var PlotVariant, PlotVariantCollection,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  PlotVariant = (function(superClass) {
    extend(PlotVariant, superClass);

    function PlotVariant() {
      return PlotVariant.__super__.constructor.apply(this, arguments);
    }

    PlotVariant.prototype.findUnitPrice = function(unit_model) {
      var basicCost;
      basicCost = "";
      if (!(unit_model instanceof Backbone.Model) || unit_model === "") {
        return;
      }
      basicCost = unit_model.get('selling_amount');
      return basicCost;
    };

    return PlotVariant;

  })(Backbone.Model);

  PlotVariantCollection = (function(superClass) {
    extend(PlotVariantCollection, superClass);

    function PlotVariantCollection() {
      return PlotVariantCollection.__super__.constructor.apply(this, arguments);
    }

    PlotVariantCollection.prototype.model = PlotVariant;

    PlotVariantCollection.prototype.setPlotVariantAttributes = function(data) {
      plotVariantCollection.reset(data);
      return plotVariantMasterCollection.reset(data);
    };

    PlotVariantCollection.prototype.getPlotUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      plotVariantCollection.each(function(model) {
        var plotUnits;
        plotUnits = unitCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(plotUnits);
      });
      $.each(units, function(index, value) {
        return newUnits = $.merge(newUnits, value);
      });
      return newUnits;
    };

    PlotVariantCollection.prototype.getPlotMasterUnits = function() {
      var newUnits, units;
      units = [];
      newUnits = [];
      plotVariantMasterCollection.each(function(model) {
        var plotUnits;
        plotUnits = unitMasterCollection.where({
          unit_variant_id: model.get('id')
        });
        return units.push(plotUnits);
      });
      $.each(units, function(index, value) {
        return newUnits = $.merge(newUnits, value);
      });
      return newUnits;
    };

    PlotVariantCollection.prototype.getPlotUnitTypes = function() {
      var unit_types;
      unit_types = [];
      plotVariantMasterCollection.each(function(item) {
        var unitTypeModel;
        unitTypeModel = unitTypeMasterCollection.findWhere({
          'id': item.get('unit_type_id')
        });
        if ($.inArray(item.get('unit_type_id'), unit_types) === -1) {
          return unit_types.push(parseInt(unitTypeModel.get('id')));
        }
      });
      return unit_types;
    };

    PlotVariantCollection.prototype.getPlotAttributes = function() {
      var attributes;
      attributes = [];
      plotVariantMasterCollection.each(function(item) {
        return $.each(item.get('variant_attributes'), function(index, value) {
          if (_.isArray(value)) {
            return $.each(value, function(ind, val) {
              if ($.inArray(val, attributes) === -1) {
                return attributes.push(val);
              }
            });
          } else {
            if ($.inArray(value, attributes) === -1) {
              return attributes.push(value);
            }
          }
        });
      });
      return attributes;
    };

    return PlotVariantCollection;

  })(Backbone.Collection);

  window.plotVariantCollection = new PlotVariantCollection;

  window.plotVariantMasterCollection = new PlotVariantCollection;

  window.plotVariant = new PlotVariant;

}).call(this);

//# sourceMappingURL=../../frontend/entities/plot.variant.entity.js.map
(function() {
  var Polygon,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Polygon = (function(superClass) {
    extend(Polygon, superClass);

    function Polygon() {
      return Polygon.__super__.constructor.apply(this, arguments);
    }

    Polygon.prototype.initialize = function() {
      this.node = "";
      return this.pointList = [];
    };

    Polygon.prototype.createPolgyon = function() {
      return this.node = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
    };

    Polygon.prototype.createPolgyonTag = function(item) {
      console.log(item.other_details["class"]);
      this.pointList = [];
      this.createPolgyon();
      this.points(item.points);
      this.attribute('class', item.other_details["class"]);
      this.attribute('id', item.object_id);
      this.attribute('type', item.object_type);
      return this.node;
    };

    Polygon.prototype.generatePolygonTag = function(item) {
      var pointList, polygon;
      pointList = this.getPointList(item.points);
      pointList = pointList.join(' ');
      polygon = draw.polygon(pointList);
      polygon.attr({
        'class': item.other_details["class"],
        'id': item.object_id,
        'type': item.object_type,
        svgid: item.id
      });
      polygon.addClass('polygon-type');
      if (item.primary_breakpoint !== null) {
        polygon.data('primary-breakpoint', item.primary_breakpoint);
      }
      if (item.object_type === "amenity") {
        polygon.data('amenity-title', item.other_details.title);
        return polygon.data('amenity-desc', item.other_details.description);
      }
    };

    Polygon.prototype.getPointList = function(pointsArr) {
      var formattedPoints, i, k, l, len, pointList;
      pointList = [];
      i = 0;
      l = pointsArr.length;
      while (i < l) {
        pointList.push([parseInt(pointsArr[i]), parseInt(pointsArr[i + 1])]);
        i += 2;
      }
      formattedPoints = [];
      k = 0;
      len = pointList.length;
      while (k < len) {
        formattedPoints.push(pointList[k].join());
        k++;
      }
      return formattedPoints;
    };

    Polygon.prototype.attribute = function(key, val) {
      if (val === void 0) {
        return false;
      }
      return this.node.setAttribute(key, val);
    };

    Polygon.prototype.build = function(arg) {
      var i, l, res;
      res = [];
      i = 0;
      l = arg.length;
      while (i < l) {
        res.push(arg[i].join(','));
        i++;
      }
      return res.join(' ');
    };

    Polygon.prototype.points = function(args) {
      var i, l;
      i = 0;
      l = args.length;
      while (i < l) {
        this.pointList.push([args[i], args[i + 1]]);
        i += 2;
      }
      this.attribute('points', this.build(this.pointList));
      return this.node;
    };

    return Polygon;

  })(Backbone.Model);

  window.polygon = new Polygon;

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/polygon.entity.js.map
(function() {
  var Marker,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Marker = (function(superClass) {
    extend(Marker, superClass);

    function Marker() {
      return Marker.__super__.constructor.apply(this, arguments);
    }

    Marker.prototype.generateMarkerTag = function(item) {
      var circle, circle1, circle2, cx, cy, details, drawMarkerElements, ellipse, ellipseHeight, ellipseWidth, groupMarker, innerRadius, markerType, outerRadius, points, polygon, typeClass;
      markerType = item.other_details.marker_type;
      cx = item.other_details.cx;
      cy = item.other_details.cy;
      innerRadius = item.other_details.innerRadius;
      outerRadius = item.other_details.outerRadius;
      ellipseWidth = item.other_details.ellipseWidth;
      ellipseHeight = item.other_details.ellipseHeight;
      typeClass = item['other_details']['class'];
      points = item.points;
      drawMarkerElements = [];
      groupMarker = draw.group();
      groupMarker.attr({
        "class": 'marker-grp',
        type: item.object_type,
        id: item.object_id,
        svgid: item.id
      });
      if (item.object_type === "amenity") {
        groupMarker.data('amenity-title', item.other_details.title);
        groupMarker.data('amenity-desc', item.other_details.description);
      }
      switch (markerType) {
        case 'concentric':
          groupMarker.addClass('concentric');
          groupMarker.addClass(typeClass);
          circle1 = draw.circle(innerRadius);
          circle1.attr({
            fill: '#FF8500',
            cx: points[0],
            cy: points[1]
          });
          circle2 = draw.circle(outerRadius);
          circle2.attr({
            fill: 'none',
            cx: points[0],
            cy: points[1],
            stroke: "#FF7900",
            'stroke-width': 4,
            'stroke-miterlimit': 10
          });
          drawMarkerElements.push(circle1);
          drawMarkerElements.push(circle2);
          break;
        case 'solid':
          window.canvas_type = "solidMarker";
          groupMarker.addClass('solid');
          groupMarker.addClass(typeClass);
          circle = draw.circle(outerRadius);
          circle.attr({
            cx: points[0],
            cy: points[1]
          });
          drawMarkerElements.push(circle);
          break;
        case 'location':
          window.canvas_type = "locationMarker";
          groupMarker.addClass('location');
          groupMarker.addClass(typeClass);
          polygon = draw.polygon('776.906,408.457 821.094,407 798.01,459.243');
          polygon.attr({
            fill: '#F7931E'
          });
          drawMarkerElements.push(polygon);
          ellipse = draw.ellipse(40, 40);
          ellipse.attr({
            'fill': '#FFFFFF',
            'stroke': '#F7931E',
            'stroke-width': 6,
            'stroke-miterlimit': 10,
            cx: points[0],
            cy: points[1]
          });
          drawMarkerElements.push(ellipse);
          break;
        case 'earthlocation':
          window.canvas_type = "earthlocationMarker";
          groupMarker.addClass('earthlocation');
          details = item.other_details;
          ellipse = draw.ellipse(window.ellipseWidth, window.ellipseHeight);
          ellipse.addClass(typeClass);
          ellipse.attr({
            'fill': '#FF6700',
            'stroke': '#FF7300',
            'stroke-width': 3,
            'fill-opacity': 0.2,
            'stroke-miterlimit': 10,
            cx: points[0],
            cy: points[1]
          });
          drawMarkerElements.push(ellipse);
          break;
      }
      return _.each(drawMarkerElements, (function(_this) {
        return function(markerElement, key) {
          return groupMarker.add(markerElement);
        };
      })(this));
    };

    Marker.prototype.generateLocationMarker = function(item) {
      var details, dx, dy, eCx, eCy, ellipse, groupLocation, pointList, pointsArr, polygon;
      details = item.other_details;
      groupLocation = draw.group();
      groupLocation.attr({
        "class": details['location_marker_class']
      });
      groupLocation.addClass('marker');
      dx = parseInt(details['location_marker_x']);
      dy = parseInt(details['location_marker_y']);
      pointsArr = [];
      pointsArr.push(parseInt(776.906) + dx);
      pointsArr.push(parseInt(408.457) + dy);
      pointsArr.push(parseInt(821.094) + dx);
      pointsArr.push(parseInt(407) + dy);
      pointsArr.push(parseInt(798.01) + dx);
      pointsArr.push(parseInt(459.243) + dy);
      pointList = this.getPointList(pointsArr);
      pointList = pointList.join(' ');
      polygon = draw.polygon(pointList);
      polygon.attr({
        fill: '#F7931E'
      });
      groupLocation.add(polygon);
      ellipse = draw.ellipse(40, 40);
      eCx = 798.696 + dx;
      eCy = 401.52 + dy;
      return ellipse.attr({
        'fill': '#FFFFFF',
        'stroke': '#F7931E',
        'stroke-width': 6,
        'stroke-miterlimit': 10,
        cx: eCx,
        cy: eCy
      });
    };

    Marker.prototype.getPointList = function(pointsArr) {
      var formattedPoints, i, k, l, len, pointList;
      pointList = [];
      i = 0;
      l = pointsArr.length;
      while (i < l) {
        pointList.push([parseInt(pointsArr[i]), parseInt(pointsArr[i + 1])]);
        i += 2;
      }
      formattedPoints = [];
      k = 0;
      len = pointList.length;
      while (k < len) {
        formattedPoints.push(pointList[k].join());
        k++;
      }
      return formattedPoints;
    };

    return Marker;

  })(Backbone.Model);

  window.marker = new Marker;

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/marker.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.VillaView = (function(superClass) {
    extend(VillaView, superClass);

    function VillaView() {
      return VillaView.__super__.constructor.apply(this, arguments);
    }

    VillaView.prototype.template = Handlebars.compile('<form id="add-form"><div class="form-group"> <label class="unit-label" for="exampleInputPassword1">Units</label> <select class="form-control units"> <option value="">Select</option> {{#options}} <option value="{{id}}">{{name}}</option> {{/options}} </select> </div> <div class="checkbox"> <label> <input type="checkbox" name="check_primary"> Mark as primary unit </label> </div> <form>');

    VillaView.prototype.ui = {
      units: '.units',
      unitLabel: '.unit-label'
    };

    VillaView.prototype.serializeData = function() {
      var data, options, units;
      data = VillaView.__super__.serializeData.call(this);
      options = [];
      units = Marionette.getOption(this, 'units');
      $.each(units, function(ind, val) {
        return options.push({
          'id': val.get('id'),
          'name': val.get('unit_name')
        });
      });
      data.options = options;
      return data;
    };

    VillaView.prototype.events = {
      'change @ui.units': function(e) {
        window.coord = 0;
        return $('.villa').each(function(index, value) {
          if (value.id === $(e.target).val()) {
            $('.alert').text('Already assigned');
            window.coord = 1;
            window.hideAlert();
          }
        });
      }
    };

    VillaView.prototype.onShow = function() {
      var units;
      units = bunglowVariantCollection.getBunglowUnits();
      if (units.length === 0 && EDITMODE === false) {
        this.ui.units.hide();
        this.ui.unitLabel.hide();
        $('.alert').text('No villas');
        return window.hideAlert();
      }
    };

    return VillaView;

  })(Marionette.ItemView);

  AuthoringTool.VillaCtrl = (function(superClass) {
    extend(VillaCtrl, superClass);

    function VillaCtrl() {
      return VillaCtrl.__super__.constructor.apply(this, arguments);
    }

    VillaCtrl.prototype.initialize = function() {
      var units;
      units = bunglowVariantCollection.getBunglowUnits();
      return this.show(new AuthoringTool.VillaView({
        units: units
      }));
    };

    return VillaCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/villa.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.PlotView = (function(superClass) {
    extend(PlotView, superClass);

    function PlotView() {
      return PlotView.__super__.constructor.apply(this, arguments);
    }

    PlotView.prototype.template = Handlebars.compile('<form id="add-form"><div class="form-group"> <label class="unit-label" for="exampleInputPassword1">Units</label> <select class="form-control units"> <option value="">Select</option> {{#options}} <option value="{{id}}">{{name}}</option> {{/options}} </select> </div> <div class="checkbox"> <label> <input type="checkbox" name="check_primary"> Mark as primary unit </label> </div> </form>');

    PlotView.prototype.ui = {
      units: '.units'
    };

    PlotView.prototype.serializeData = function() {
      var data, options, units;
      data = PlotView.__super__.serializeData.call(this);
      options = [];
      units = Marionette.getOption(this, 'units');
      $.each(units, function(ind, val) {
        return options.push({
          'id': val.get('id'),
          'name': val.get('unit_name')
        });
      });
      data.options = options;
      console.log(data);
      return data;
    };

    PlotView.prototype.events = {
      'change @ui.units': function(e) {
        window.coord = 0;
        return $('.plot').each(function(index, value) {
          if (value.id === $(e.target).val()) {
            $('.alert').text('Already assigned');
            window.hideAlert();
            window.coord = 1;
          }
        });
      }
    };

    PlotView.prototype.onShow = function() {
      var units;
      units = Marionette.getOption(this, 'units');
      if (units.length === 0 && EDITMODE === false) {
        this.ui.units.hide();
        this.ui.unitLabel.hide();
        $('.alert').text('No plots');
        return window.hideAlert();
      }
    };

    return PlotView;

  })(Marionette.ItemView);

  AuthoringTool.PlotCtrl = (function(superClass) {
    extend(PlotCtrl, superClass);

    function PlotCtrl() {
      return PlotCtrl.__super__.constructor.apply(this, arguments);
    }

    PlotCtrl.prototype.initialize = function() {
      var units;
      units = plotVariantCollection.getPlotUnits();
      return this.show(new AuthoringTool.PlotView({
        units: units
      }));
    };

    return PlotCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/plot.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.AmenityView = (function(superClass) {
    extend(AmenityView, superClass);

    function AmenityView() {
      return AmenityView.__super__.constructor.apply(this, arguments);
    }

    AmenityView.prototype.template = Handlebars.compile('<form id="add-form"> <div class="form-group"> <label for="markerTitle">Title</label> <input type="text" class="form-control" id="amenity-title"> </div> <div class="form-group"> <label for="Description">Description</label> <textarea class="form-control" rows="3" id="amenity-description"></textarea> </div> </form>');

    return AmenityView;

  })(Marionette.ItemView);

  AuthoringTool.AmenityCtrl = (function(superClass) {
    extend(AmenityCtrl, superClass);

    function AmenityCtrl() {
      return AmenityCtrl.__super__.constructor.apply(this, arguments);
    }

    AmenityCtrl.prototype.initialize = function(opts) {
      return this.show(new AuthoringTool.AmenityView);
    };

    return AmenityCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/amenity.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.ApartmentView = (function(superClass) {
    extend(ApartmentView, superClass);

    function ApartmentView() {
      return ApartmentView.__super__.constructor.apply(this, arguments);
    }

    ApartmentView.prototype.template = Handlebars.compile('<form id="add-form"><div class="form-group"> <label class="unit-label" for="exampleInputPassword1">Units</label> <select class="form-control units"> <option value="">Select</option> {{#options}} <option value="{{id}}">{{name}}</option> {{/options}} </select> </div> <div class="checkbox"> <label> <input type="checkbox" name="check_primary"> Mark as primary unit </label> </div> <form>');

    ApartmentView.prototype.ui = {
      units: '.units',
      unitLabel: '.unit-label'
    };

    ApartmentView.prototype.serializeData = function() {
      var data, options, units;
      data = ApartmentView.__super__.serializeData.call(this);
      options = [];
      units = Marionette.getOption(this, 'units');
      $.each(units, function(ind, val) {
        return options.push({
          'id': val.get('id'),
          'name': val.get('unit_name')
        });
      });
      data.options = options;
      return data;
    };

    ApartmentView.prototype.events = {
      'change @ui.units': function(e) {
        window.coord = 0;
        return $('.villa').each(function(index, value) {
          if (value.id === $(e.target).val()) {
            $('.alert').text('Already assigned');
            window.coord = 1;
            window.hideAlert();
          }
        });
      }
    };

    ApartmentView.prototype.onShow = function() {
      var units;
      units = Marionette.getOption(this, 'units');
      if (units.length === 0 && EDITMODE === false) {
        this.ui.units.hide();
        this.ui.unitLabel.hide();
        $('.alert').text('No apartments');
        return window.hideAlert();
      }
    };

    return ApartmentView;

  })(Marionette.ItemView);

  AuthoringTool.ApartmentCtrl = (function(superClass) {
    extend(ApartmentCtrl, superClass);

    function ApartmentCtrl() {
      return ApartmentCtrl.__super__.constructor.apply(this, arguments);
    }

    ApartmentCtrl.prototype.initialize = function() {
      var newUnits, temp, units;
      units = apartmentVariantCollection.getApartmentUnits();
      temp = new Backbone.Collection(units);
      newUnits = temp.where({
        'building_id': parseInt(building_id)
      });
      return this.show(new AuthoringTool.ApartmentView({
        units: newUnits
      }));
    };

    return ApartmentCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/apartment.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.BuildingView = (function(superClass) {
    extend(BuildingView, superClass);

    function BuildingView() {
      return BuildingView.__super__.constructor.apply(this, arguments);
    }

    BuildingView.prototype.template = Handlebars.compile('<form id="add-form"><div class="form-group"> <label  class="unit-label" for="exampleInputPassword1">Units</label> <select class="form-control units"> <option value="">Select</option> {{#options}} <option value="{{id}}">{{name}}</option> {{/options}} </select> </div> <div class="checkbox"> <label> <input type="checkbox" name="check_primary"> Mark as primary unit </label> </div> </form>');

    BuildingView.prototype.ui = {
      units: '.units',
      unitLabel: '.unit-label'
    };

    BuildingView.prototype.serializeData = function() {
      var data, options, units;
      data = BuildingView.__super__.serializeData.call(this);
      options = [];
      units = Marionette.getOption(this, 'units');
      $.each(units, function(ind, val) {
        return options.push({
          'id': val.get('id'),
          'name': val.get('building_name')
        });
      });
      data.options = options;
      return data;
    };

    BuildingView.prototype.onShow = function() {
      var units;
      units = buildingCollection;
      if (units.length === 0 && EDITMODE === false) {
        this.ui.units.hide();
        this.ui.unitLabel.hide();
        $('.alert').text('No buildings');
        return window.hideAlert();
      }
    };

    return BuildingView;

  })(Marionette.ItemView);

  AuthoringTool.BuildingCtrl = (function(superClass) {
    extend(BuildingCtrl, superClass);

    function BuildingCtrl() {
      return BuildingCtrl.__super__.constructor.apply(this, arguments);
    }

    BuildingCtrl.prototype.initialize = function() {
      var units;
      units = buildingCollection.toArray();
      return this.show(new AuthoringTool.BuildingView({
        units: units
      }));
    };

    return BuildingCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/building.entity.js.map
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  AuthoringTool.ProjectView = (function(superClass) {
    extend(ProjectView, superClass);

    function ProjectView() {
      return ProjectView.__super__.constructor.apply(this, arguments);
    }

    ProjectView.prototype.template = Handlebars.compile('<form id="add-form"> <div class="form-group"> <label class="unit-label" for="exampleInputPassword1">Name</label> <input type="text" class="form-control" id="" value="{{title}}" disabled> </div> <div class="form-group"> <label for="Address">Address</label> <textarea class="form-control" rows="2" id="" disabled>{{address}}</textarea> </div> <div class="form-group"> <label for="City">City</label> <input type="text" class="form-control" id="" value="{{city}}" disabled> </div> <form>');

    ProjectView.prototype.ui = {
      units: '.units',
      unitLabel: '.unit-label',
      check_location_marker: '.check_location_marker'
    };

    ProjectView.prototype.serializeData = function() {
      var data, project_data;
      data = ProjectView.__super__.serializeData.call(this);
      project_data = Marionette.getOption(this, 'project_data');
      data.title = project_data['title'];
      data.address = project_data['project_address'];
      data.city = project_data['city'];
      return data;
    };

    ProjectView.prototype.events = function() {
      return {
        'click @ui.check_location_marker': function(e) {
          if ($(e.currentTarget).prop('checked', true)) {
            return window.drawDefaultMarker('location');
          }
        }
      };
    };

    return ProjectView;

  })(Marionette.ItemView);

  AuthoringTool.ProjectCtrl = (function(superClass) {
    extend(ProjectCtrl, superClass);

    function ProjectCtrl() {
      return ProjectCtrl.__super__.constructor.apply(this, arguments);
    }

    ProjectCtrl.prototype.initialize = function(opts) {
      console.log(opts);
      return this.show(new AuthoringTool.ProjectView({
        project_data: project_data
      }));
    };

    return ProjectCtrl;

  })(Marionette.RegionController);

}).call(this);

//# sourceMappingURL=../../authoring-tool/entities/project.entity.js.map
(function() {
  jQuery(document).ready(function($) {
    var keydownFunc;
    $('.svg-canvas').addClass('svg-off');
    $('.area').canvasAreaDraw();
    window.draw = SVG('aj-imp-builder-drag-drop');
    window.svgData = {
      'image': '',
      'data': [],
      'supported_types': ['villa', 'plot']
    };
    window.cx = 630.101;
    window.cy = 362.245;
    window.innerRadius = 8.002;
    window.outerRadius = 15.002;
    window.ellipseWidth = 360;
    window.ellipseHeight = 160;
    window.markerPoints = [window.cx, window.cx];
    window.locationMarkerPoints = [window.cx, window.cx];
    window.dropLocationMarker = false;
    window.windowWidth = 0;
    window.EDITMODE = false;
    window.createSvg = function(svgData) {
      window.rawSvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      rawSvg.setAttribute('id', 'Layer_1');
      rawSvg.setAttribute('style', 'border: 1px solid black');
      rawSvg.setAttribute('width', '100%');
      rawSvg.setAttribute('height', '100%');
      rawSvg.setAttributeNS(null, 'x', '0');
      rawSvg.setAttributeNS(null, 'y', '0');
      rawSvg.setAttribute('preserveAspectRatio', '"xMinYMin slice"');
      rawSvg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
      window.createImageTag();
      return $.each(svgData, function(index, value) {
        var tag;
        if (value.canvas_type === 'polygon') {
          tag = window.polygon.createPolgyonTag(value);
          if (tag !== "") {
            window.makeDraggable();
            rawSvg.appendChild(tag);
          }
        }
        if (value.canvas_type === 'marker') {
          return tag = window.marker.createMarkerTag(value);
        }
      });
    };
    window.createImageTag = function() {
      var svgimg;
      svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');
      svgimg.setAttributeNS(null, 'height', '800');
      svgimg.setAttributeNS(null, 'width', '1600');
      svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', svgImg);
      svgimg.setAttributeNS(null, 'x', '0');
      svgimg.setAttributeNS(null, 'y', '0');
      svgimg.setAttributeNS(null, 'visibility', 'visible');
      return rawSvg.appendChild(svgimg);
    };
    window.generateSvg = function(svgData) {
      draw.image(svgImg).data('exclude', true);
      $.each(svgData, function(index, value) {
        if (value.canvas_type === 'polygon') {
          window.polygon.generatePolygonTag(value);
        }
        if (value.canvas_type === 'marker') {
          return window.marker.generateMarkerTag(value);
        }
      });
      return draw.attr('preserveAspectRatio', "xMinYMin slice");
    };
    window.createPanel = function(data) {
      return $.each(data, function(index, value) {
        return $('.' + value).removeClass('hidden');
      });
    };
    window.makeDraggable = function(data) {
      var element;
      element = draw.polygon(data);
      return element.draggable();
    };
    window.getPendingObjects = function(svgData) {
      var collection, supportedTypes, type;
      type = [];
      collection = new Backbone.Collection(svgData.data);
      supportedTypes = svgData.supported_types;
      supportedTypes = _.uniq(supportedTypes);
      $.each(supportedTypes, function(index, value) {
        var items, marked, units;
        items = collection.where({
          'object_type': value.toLowerCase()
        });
        units = window.actualUnits(value.toLowerCase());
        marked = [];
        $.each(items, function(ind, val) {
          if (!_.isEmpty(val.get('canvas_type'))) {
            return marked.push(val);
          }
        });
        return type.push({
          'name': value,
          'id': value,
          'total': units.length,
          'marked': marked.length
        });
      });
      return type;
    };
    window.actualUnits = function(value) {
      var newUnits, temp, units;
      units = [];
      if (value === 'villa') {
        units = bunglowVariantCollection.getBunglowMasterUnits();
      }
      if (value === 'plot') {
        units = plotVariantCollection.getPlotMasterUnits();
      }
      if (value === 'building') {
        units = buildingMasterCollection.toArray();
      }
      if (value === 'apartment') {
        units = apartmentVariantCollection.getApartmentMasterUnits();
        temp = new Backbone.Collection(units);
        newUnits = temp.where({
          'building_id': parseInt(building_id)
        });
        units = newUnits;
      }
      return units;
    };
    window.showPendingObjects = function(data) {
      var html, marked, total;
      html = '';
      total = [];
      marked = [];
      $.each(data, function(index, value) {
        total.push(value.total + ' ' + value.name + '(s)');
        return marked.push(value.marked + ' ' + value.name + '(s)');
      });
      html = '<strong class="pull-right total-count">' + total.join(" | ") + '</strong>' + '<strong class="pull-right title-count"> Total:</strong>' + '<strong class="pull-right total-count">' + marked.join(" | ") + '</strong>' + '<strong class="pull-right title-count"> Marked:</strong>';
      return $('.pending').html(html);
    };
    window.generatePropTypes = function() {
      var select, types;
      types = window.svgData.supported_types;
      select = $('.property_type');
      $('<option />', {
        value: "",
        text: 'Select option'
      }).appendTo(select);
      $.each(types, function(index, value) {
        var valueText, valuetemp;
        if (svg_type === 'google_earth' && value === 'Project') {
          return;
        }
        valueText = value;
        valuetemp = value;
        console.log(value);
        if (value === "Apartment/Penthouse") {
          valueText = "apartment";
          valuetemp = 'apartment';
        }
        return $('<option />', {
          value: valuetemp.toLowerCase(),
          text: value.toUpperCase()
        }).appendTo(select);
      });
      return $('<option />', {
        value: 'unassign',
        text: 'Unassign'.toUpperCase()
      }).appendTo(select);
    };
    window.resetCollection = function() {
      return $('.polygon-type,.marker-grp').each(function(index, value) {
        var bldg, bldgId, type, unit, unitID;
        type = $(value).attr('type');
        if (type === 'building') {
          bldgId = parseInt(value.id);
          bldg = buildingCollection.findWhere({
            'id': bldgId
          });
          return buildingCollection.remove(bldg);
        } else if (type === 'unassign') {

        } else {
          console.log(unitID = parseInt(value.id));
          if (unitID !== 0) {
            console.log(unit = unitMasterCollection.findWhere({
              'id': parseInt(value.id)
            }));
            return unitCollection.remove(unit.get('id'));
          }
        }
      });
    };
    window.iniTooltip = function() {
      return $('.amenity').tooltipster({
        theme: 'tooltipster-shadow',
        contentAsHTML: true,
        onlyOne: true,
        arrow: false,
        offsetX: 50,
        offsetY: -10,
        interactive: true,
        trigger: 'hover'
      });
    };
    window.loadJSONData = function() {
      return $.ajax({
        type: 'GET',
        url: BASERESTURL + '/project/' + PROJECTID + '/project-details',
        async: false,
        success: function(response) {
          var types;
          response = response.data;
          bunglowVariantCollection.setBunglowVariantAttributes(response.bunglow_variants);
          unitTypeCollection.setUnitTypeAttributes(response.unit_types);
          buildingCollection.setBuildingAttributes(response.buildings);
          apartmentVariantCollection.setApartmentVariantAttributes(response.apartment_variants);
          window.propertyTypes = response.property_types;
          plotVariantCollection.setPlotVariantAttributes(response.plot_variants);
          unitCollection.setUnitAttributes(response.units);
          window.generatePropTypes();
          types = window.getPendingObjects(window.svgData);
          window.showPendingObjects(types);
          window.iniTooltip();
          window.generateSvg(window.svgData.data);
          return window.resetCollection();
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    };
    window.loadSVGData = function() {
      return $.ajax({
        type: 'GET',
        url: BASEURL + '/admin/project/' + PROJECTID + '/image/' + IMAGEID,
        async: false,
        success: function(response) {
          var types;
          window.svgData = {};
          window.svgData['image'] = svgImg;
          window.svgData['data'] = response.data;
          window.svgData['supported_types'] = JSON.parse(supported_types);
          window.svgData['breakpoint_position'] = breakpoint_position;
          window.svgData['svg_type'] = svg_type;
          window.svgData['building_id'] = building_id;
          window.svgData['project_id'] = project_id;
          types = window.getPendingObjects(window.svgData);
          window.showPendingObjects(types);
          return window.generateSvg(window.svgData.data);
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    };
    window.loadSvgPaths = function() {
      var building_name, select, svgCount, svgs;
      select = $('.svgPaths');
      $('<option />', {
        value: "",
        text: "Select Option"
      }).appendTo(select);
      svgs = jQuery.parseJSON(svg_paths);
      svgs = _.omit(svgs, image_id);
      $.each(svgs, function(index, value) {
        if (value === "") {
          return svgs = _.omit(svgs, index);
        }
      });
      svgCount = Object.keys(svgs).length;
      if (svgCount === 0) {
        select.hide();
        $('.duplicate').hide();
        return;
      }
      building_name = buildingMasterCollection.findWhere({
        'id': parseInt(building_id)
      });
      if (parseInt(building_id) !== 0) {
        $.each(svgs, function(index, value) {
          var svg_name, svg_name_arr;
          svg_name_arr = value.split('/');
          svg_name = svg_name_arr[parseInt(svg_name_arr.length) - 1];
          return $('<option />', {
            value: index,
            text: building_name.get('building_name') + '-' + svg_name
          }).appendTo(select);
        });
        return;
      }
      return $.each(svgs, function(index, value) {
        var svg_name, svg_name_arr;
        svg_name_arr = value.split('/');
        svg_name = svg_name_arr[parseInt(svg_name_arr.length) - 1];
        return $('<option />', {
          value: index,
          text: svg_name
        }).appendTo(select);
      });
    };
    window.loadOjectData = function() {
      return $.ajax({
        type: 'GET',
        url: BASEURL + '/admin/project/' + PROJECTID + '/image/' + IMAGEID,
        async: false,
        success: function(response) {
          window.svgData = {};
          window.svgData['image'] = svgImg;
          window.svgData['data'] = response.data;
          window.svgData['supported_types'] = JSON.parse(supported_types);
          window.svgData['breakpoint_position'] = breakpoint_position;
          window.svgData['svg_type'] = svg_type;
          window.svgData['building_id'] = building_id;
          window.svgData['project_id'] = project_id;
          window.loadJSONData();
          $('.duplicate').hide();
          if (response.data.length === 0) {
            $('.duplicate').show();
            return window.loadSvgPaths();
          }
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    };
    window.renderSVG = function() {
      var canvas, ctx, s, str, types;
      window.createSvg(window.svgData.data);
      types = window.getPendingObjects(window.svgData);
      window.showPendingObjects(types);
      s = new XMLSerializer();
      str = s.serializeToString(rawSvg);
      draw.svg(str);
      window.resetCollection();
      $('.area').val("");
      window.f = [];
      $("form").trigger("reset");
      $('#dynamice-region').empty();
      $('#aj-imp-builder-drag-drop canvas').hide();
      $('#aj-imp-builder-drag-drop svg').show();
      $('.edit-box').addClass('hidden');
      canvas = document.getElementById("c");
      ctx = canvas.getContext("2d");
      return ctx.clearRect(0, 0, canvas.width, canvas.height);
    };
    window.resetTool = function() {
      var canvas, ctx;
      window.resetCollection();
      window.EDITMODE = false;
      $('.area').val("");
      window.f = [];
      $("form").trigger("reset");
      $('#dynamice-region').empty();
      $('#aj-imp-builder-drag-drop canvas').hide();
      $('#aj-imp-builder-drag-drop svg').show();
      $('.edit-box').addClass('hidden');
      canvas = document.getElementById("c");
      ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      return $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
    };
    window.saveUnit = function() {
      var details, locationPoints, myObject, objectType, type;
      myObject = {};
      details = {};
      objectType = $('.property_type').val();
      myObject['image_id'] = IMAGEID;
      myObject['object_type'] = objectType;
      myObject['canvas_type'] = window.canvas_type;
      myObject['breakpoint_position'] = window.breakpoint_position;
      if (objectType === "amenity") {
        myObject['object_id'] = 0;
      } else if (objectType === "project") {
        myObject['object_id'] = project_id;
        if (window.dropLocationMarker === true) {
          locationPoints = window.locationMarkerPoints;
          details['location_marker_x'] = locationPoints[0];
          details['location_marker_y'] = locationPoints[1];
          details['location_marker_class'] = 'marker';
        }
      } else {
        myObject['object_id'] = $('.units').val();
      }
      if (myObject['object_type'] === "amenity") {
        details['title'] = $('#amenity-title').val();
        details['description'] = $('#amenity-description').val();
        details['class'] = $('.property_type').val();
      } else if (myObject['object_type'] === "project") {
        details['class'] = 'step1-marker';
      } else {
        type = $('.property_type').val();
        details['class'] = 'layer ' + type;
      }
      if (window.canvas_type === "concentricMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['innerRadius'] = window.innerRadius;
        details['outerRadius'] = window.outerRadius;
        details['marker_type'] = 'concentric';
      } else if (window.canvas_type === "solidMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['innerRadius'] = window.innerRadius;
        details['outerRadius'] = window.outerRadius;
        details['marker_type'] = 'solid';
      } else if (window.canvas_type === "earthlocationMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['ellipseWidth'] = window.ellipseWidth;
        details['ellipseHeight'] = window.ellipseHeight;
        details['marker_type'] = 'earthlocation';
      } else {
        myObject['points'] = $('.area').val().split(',');
      }
      myObject['other_details'] = details;
      if ($('[name="check_primary"]').is(":checked") === true) {
        myObject['primary_breakpoint'] = window.breakpoint_position;
      }
      return $.ajax({
        type: 'POST',
        headers: {
          'x-csrf-token': $("meta[name='csrf-token']").attr('content')
        },
        url: BASEURL + '/admin/project/' + PROJECTID + '/svg-tool',
        async: false,
        data: $.param(myObject),
        success: function(response) {
          var types;
          myObject['id'] = response.data.id;
          if (response.data.primary_breakpoint !== null) {
            myObject['primary_breakpoint'] = response.data.primary_breakpoint;
          }
          if (svg_type === "google_earth") {
            window.is_project_marked = true;
          }
          window.svgData.data.push(myObject);
          draw.clear();
          types = window.getPendingObjects(window.svgData);
          window.showPendingObjects(types);
          window.generateSvg(window.svgData.data);
          window.resetTool();
          return $('.toggle').bind('click');
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    };
    window.loadForm = function(type) {
      var propType;
      propType = $('.property_type').val();
      if ((propType === 'project') && window.is_project_marked) {
        $('.submit').attr('disabled', true);
      } else {
        $('.submit').attr('disabled', false);
      }
      this.region = new Marionette.Region({
        el: '#dynamice-region'
      });
      if (type === 'villa') {
        new AuthoringTool.VillaCtrl({
          region: this.region
        });
      }
      if (type === 'plot') {
        new AuthoringTool.PlotCtrl({
          region: this.region
        });
      }
      if (type === 'amenity') {
        new AuthoringTool.AmenityCtrl({
          region: this.region
        });
      }
      if (type === 'apartment') {
        new AuthoringTool.ApartmentCtrl({
          'region': this.region
        });
      }
      if (type === 'building') {
        new AuthoringTool.BuildingCtrl({
          'region': this.region
        });
      }
      if (type === 'project') {
        new AuthoringTool.ProjectCtrl({
          'region': this.region,
          'property': project_data
        });
      }
      if (type === 'unassign') {
        return $('#dynamice-region').empty();
      }
    };
    window.showDetails = function(elem) {
      var select, type, unit, unit_name;
      type = $(elem).attr('type');
      if (type !== 'unassign' && type !== 'undetect') {
        unit_name = "";
        if (type === 'building') {
          unit = buildingMasterCollection.findWhere({
            'id': parseInt(elem.id)
          });
          unit_name = unit.get('building_name');
        } else {
          unit = unitMasterCollection.findWhere({
            'id': parseInt(elem.id)
          });
          unit_name = unit.get('unit_name');
        }
        $('.property_type').val($(elem).attr('type'));
        $('.property_type').attr('disabled', true);
        select = $('.units');
        $('<option />', {
          value: elem.id,
          text: unit_name
        }).appendTo(select);
        $('.units').attr('disabled', true);
        $('.units').val(elem.id);
        return $('.units').show();
      } else {
        $("form").trigger("reset");
        $('.edit').removeClass('hidden');
        $('.delete').removeClass('hidden');
        $('.submit').addClass('hidden');
        $('.property_type').attr('disabled', false);
        return $('.property_type').val('unassign');
      }
    };
    window.loadProjectForm = function() {
      var propType, region, select;
      if (window.canvas_type === "earthlocationMarker") {
        select = $('.property_type');
        $('<option />', {
          value: 'project',
          text: s.capitalize('project')
        }).appendTo(select);
      }
      $('.property_type').val('project');
      $('.property_type').attr('disabled', true);
      propType = $('.property_type').val();
      if ((propType === 'project') && window.is_project_marked) {
        $('.submit').attr('disabled', true);
      } else {
        $('.submit').attr('disabled', false);
      }
      region = new Marionette.Region({
        el: '#dynamice-region'
      });
      return new AuthoringTool.ProjectCtrl({
        'region': region,
        'property': project_data
      });
    };
    window.hideAlert = function() {
      $('.alert').show();
      return $('.alert-box').delay(3000).queue(function(next) {
        $(this).hide('fade');
        return next();
      });
    };
    window.hideLabel = function() {
      $('.alert2').show();
      return $('.alert2').delay(3000).queue(function(next) {
        $(this).hide('fade');
        return next();
      });
    };
    window.buildSvgObjectData = function() {
      var details, locationPoints, myObject, objectType;
      myObject = {};
      details = {};
      objectType = $('.property_type').val();
      myObject['image_id'] = IMAGEID;
      myObject['object_type'] = objectType;
      myObject['canvas_type'] = window.canvas_type;
      myObject['breakpoint_position'] = window.breakpoint_position;
      if (objectType === "amenity") {
        myObject['object_id'] = 0;
      } else if (objectType === "project") {
        myObject['object_id'] = project_id;
        if (window.dropLocationMarker === true) {
          locationPoints = window.locationMarkerPoints;
          details['location_marker_x'] = locationPoints[0];
          details['location_marker_y'] = locationPoints[1];
          details['location_marker_class'] = 'marker';
        }
      } else {
        myObject['object_id'] = $('.units').val();
      }
      if (myObject['object_type'] === "amenity") {
        details['title'] = $('#amenity-title').val();
        details['description'] = $('#amenity-description').val();
        details['class'] = $('.property_type').val();
      } else if (myObject['object_type'] === "project") {
        details['class'] = 'step1-marker';
      } else {
        details['class'] = 'layer ' + $('.property_type').val();
      }
      if (window.canvas_type === "concentricMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['innerRadius'] = window.innerRadius;
        details['outerRadius'] = window.outerRadius;
        details['marker_type'] = 'concentric';
      } else if (window.canvas_type === "solidMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['innerRadius'] = window.innerRadius;
        details['outerRadius'] = window.outerRadius;
        details['marker_type'] = 'solid';
      } else if (window.canvas_type === "earthlocationMarker") {
        myObject['points'] = window.markerPoints;
        myObject['canvas_type'] = 'marker';
        details['cx'] = window.cx;
        details['cy'] = window.cy;
        details['ellipseWidth'] = window.ellipseWidth;
        details['ellipseHeight'] = window.ellipseHeight;
        details['marker_type'] = 'earthlocation';
      } else {
        myObject['points'] = $('.area').val().split(',');
      }
      myObject['other_details'] = details;
      if ($('[name="check_primary"]').is(":checked") === true) {
        myObject['primary_breakpoint'] = window.breakpoint_position;
      }
      return myObject;
    };
    window.drawDefaultMarker = function(markerType) {
      var circle, circle1, circle2, drawMarkerElements, ellipse, groupLocation, groupMarker, polygon;
      drawMarkerElements = [];
      window.markerPoints = [window.cx, window.cy];
      groupLocation = "";
      groupMarker = draw.group();
      switch (markerType) {
        case 'concentric':
          window.canvas_type = "concentricMarker";
          groupMarker.attr({
            "class": 'concentric-marker-grp'
          });
          circle1 = draw.circle(window.innerRadius);
          circle1.attr({
            fill: '#FF8500',
            cx: window.cx,
            cy: window.cy
          });
          circle2 = draw.circle(window.outerRadius);
          circle2.attr({
            fill: 'none',
            cx: window.cx,
            cy: window.cy,
            stroke: "#FF7900",
            'stroke-width': 4,
            'stroke-miterlimit': 10
          });
          drawMarkerElements.push(circle1);
          drawMarkerElements.push(circle2);
          break;
        case 'solid':
          window.canvas_type = "solidMarker";
          groupMarker.attr({
            "class": 'solid-marker-grp'
          });
          circle = draw.circle(15.002);
          circle.attr({
            cx: window.cx,
            cy: window.cy
          });
          drawMarkerElements.push(circle);
          break;
        case 'location':
          groupLocation = draw.group();
          groupLocation.attr({
            "class": 'location-marker-grp'
          });
          groupLocation.addClass('marker');
          polygon = draw.polygon('776.906,408.457 821.094,407 798.01,459.243');
          polygon.attr({
            fill: '#F7931E'
          });
          groupLocation.add(polygon);
          ellipse = draw.ellipse(40, 40);
          ellipse.attr({
            'fill': '#FFFFFF',
            'stroke': '#F7931E',
            'stroke-width': 6,
            'stroke-miterlimit': 10,
            cx: 798.696,
            cy: 401.52
          });
          drawDefaultMarker.add(ellipse);
          groupLocation.draggable();
          groupLocation.dragend = function(delta, event) {
            var newDelta;
            newDelta = [delta.x, delta.y];
            return window.locationMarkerPoints = newDelta;
          };
          window.dropLocationMarker = true;
          break;
        case 'earthlocation':
          window.canvas_type = "earthlocationMarker";
          groupMarker.attr({
            "class": 'earth-location-marker-grp'
          });
          groupMarker.addClass('step1-marker');
          ellipse = draw.ellipse(window.ellipseWidth, window.ellipseHeight);
          ellipse.attr({
            'fill': '#FF6700',
            'stroke': '#FF7300',
            'stroke-width': 3,
            'fill-opacity': 0.2,
            'stroke-miterlimit': 10,
            cx: window.cx,
            cy: window.cy
          });
          drawMarkerElements.push(ellipse);
          window.loadProjectForm();
      }
      if (window.canvas_type !== 'earthlocationMarker' && svg_type === 'google_earth') {
        $(".property_type").find("option[value='project']").remove();
        $('#dynamice-region').empty();
      }
      _.each(drawMarkerElements, (function(_this) {
        return function(markerElement, key) {
          return groupMarker.add(markerElement);
        };
      })(this));
      groupMarker.draggable();
      return groupMarker.dragend = function(delta, event) {
        var markerPts, newX, newY, newpoints, oldX, oldY, tx, ty;
        markerPts = window.markerPoints;
        oldX = markerPts[0];
        oldY = markerPts[1];
        tx = delta.x;
        ty = delta.y;
        newX = oldX + tx;
        newY = oldY + ty;
        newpoints = [newX, newY];
        return window.markerPoints = newpoints;
      };
    };
    window.loadOjectData();
    $('#aj-imp-builder-drag-drop canvas').ready(function() {
      $('#aj-imp-builder-drag-drop canvas').hide();
      $('#aj-imp-builder-drag-drop .svg-draw-clear').hide();
      window.windowWidth = 1300;
      $('canvas').css('width', window.windowWidth);
      $('canvas').css('height', window.windowWidth / 2);
      $('.svg-canvas').css('width', window.windowWidth);
      $('.svg-canvas').css('height', window.windowWidth / 2);
      return document.addEventListener('keydown', keydownFunc, false);
    });
    keydownFunc = function(e) {
      var id, object, pointList;
      if (e.which === 13) {
        if (f.length > 0) {
          $('.alert').text('POLYGON IS NOW DRAGGABLE');
          window.hideAlert();
        } else {
          return;
        }
        $('#aj-imp-builder-drag-drop canvas').hide();
        $('#aj-imp-builder-drag-drop svg').show();
        object = window.EDITOBJECT;
        id = $(object).attr('svgid');
        $('.layer[svgid="' + id + '"]').hide();
        pointList = window.polygon.getPointList(f);
        pointList = pointList.join(' ');
        this.polygon = draw.polygon(pointList);
        this.polygon.addClass('polygon-temp');
        this.polygon.data('exclude', true);
        this.polygon.attr('fill', '#CC0000');
        this.polygon.draggable();
        return this.polygon.dragend = (function(_this) {
          return function(delta, event) {
            var canvas, canvasPointsLength, ctx, i, newPoints, newX, newY, oldPoints, tx, ty;
            tx = delta.x;
            ty = delta.y;
            canvasPointsLength = window.f.length;
            oldPoints = window.f;
            newPoints = [];
            i = 0;
            while (i < canvasPointsLength) {
              newX = parseInt(oldPoints[i]) + tx;
              newY = parseInt(oldPoints[i + 1]) + ty;
              newPoints.push(newX, newY);
              i += 2;
            }
            window.f = newPoints;
            $('.area').val(newPoints.join(','));
            canvas = document.getElementById("c");
            ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            _this.polygon.fixed();
            _this.polygon.remove();
            $('#aj-imp-builder-drag-drop canvas').show();
            $('#aj-imp-builder-drag-drop .svg-draw-clear').show();
            $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
            return drawPoly(window.f);
          };
        })(this);
      }
    };
    $(".toggle").click(function() {
      $(this).toggleClass("expanded");
      return $('.menu').toggleClass('open');
    });
    $('[rel=\'popover\']').popover({
      html: 'true',
      content: '<div id="popOverBox"> <ul class="list-inline"> <li title="Amenities"><div class="marker-elem marker1 concentric-marker"></div></li> <li title="Units"><div class="marker-elem marker2 solid-marker"></div></li> <li class="google-earth-li hidden" title="Project Location"><div class="marker-elem marker3 earth-location-marker"></div></li> </ul> </div>'
    }).parent().on('click', '#popOverBox .marker-elem', function(evt) {
      var currentElem, markerType;
      window.EDITMODE = true;
      currentElem = evt.currentTarget;
      if ($(currentElem).hasClass('concentric-marker')) {
        markerType = "concentric";
      } else if ($(currentElem).hasClass('solid-marker')) {
        markerType = "solid";
      } else if ($(currentElem).hasClass('earth-location-marker')) {
        markerType = "earthlocation";
      } else if ($(currentElem).hasClass('location-marker')) {
        markerType = "location";
      }
      $('#aj-imp-builder-drag-drop canvas').hide();
      $('#aj-imp-builder-drag-drop svg').first().css("position", "relative");
      $('.edit-box').removeClass('hidden');
      $('.edit').addClass('hidden');
      $('.delete').addClass('hidden');
      $('.submit').removeClass('hidden');
      $('.property_type').attr('disabled', false);
      $('[rel=\'popover\']').popover('hide');
      return window.drawDefaultMarker(markerType);
    });
    $('[rel=\'popover\']').on('click', function(e) {
      var google_earth_li;
      if (svg_type === "google_earth") {
        google_earth_li = $('.google-earth-li').removeClass('hidden');
        return $('.popover-content').css("width", "163px");
      }
    });
    $('.select-polygon').on('click', function(e) {
      e.preventDefault();
      window.EDITMODE = true;
      window.canvas_type = "polygon";
      if (window.canvas_type !== 'earthlocationMarker' && svg_type === 'google_earth') {
        $(".property_type").find("option[value='project']").remove();
        $('#dynamice-region').empty();
      }
      $('#aj-imp-builder-drag-drop canvas').show();
      $('#aj-imp-builder-drag-drop .svg-draw-clear').show();
      $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
      $('.edit-box').removeClass('hidden');
      $('.edit').addClass('hidden');
      $('.delete').addClass('hidden');
      $('.submit').removeClass('hidden');
      return $('.property_type').attr('disabled', false);
    });
    $('.select-ellipse').on('click', function(e) {
      e.preventDefault();
      window.EDITMODE = true;
      return window.canvas_type = "ellipse";
    });
    $('svg').on('dblclick', '.polygon-type', function(e) {
      var currentElem, elemId, element, object_type, svgDataObjects, tmp;
      e.preventDefault();
      window.EDITOBJECT = e.target;
      window.canvas_type = "polygon";
      window.EDITMODE = true;
      elemId = $(e.currentTarget).attr('svgid');
      window.currentSvgId = parseInt(elemId);
      $('#aj-imp-builder-drag-drop canvas').show();
      $('#aj-imp-builder-drag-drop .svg-draw-clear').show();
      $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
      $('.edit-box').removeClass('hidden');
      currentElem = e.currentTarget;
      element = currentElem.id;
      object_type = $(currentElem).attr('type');
      tmp = new Backbone.Collection(svgData.data);
      window.newObject = tmp.clone();
      svgDataObjects = svgData.data;
      return _.each(svgDataObjects, (function(_this) {
        return function(svgDataObject, key) {
          var valpoints;
          if (parseInt(elemId) === parseInt(svgDataObject.id)) {
            valpoints = svgDataObject.points;
            $('.area').val(valpoints.join(','));
            drawPoly(valpoints);
            $('.submit').addClass('hidden');
            $('.edit').removeClass('hidden');
            $('.delete').removeClass('hidden');
            if (object_type === "project") {
              window.loadProjectForm();
            } else {
              window.loadForm(object_type);
            }
            if (!_.isNull($(currentElem).data("primary-breakpoint"))) {
              $('[name="check_primary"]').prop('checked', true);
            }
            if (object_type === "amenity") {
              $('#amenity-title').val($(currentElem).data("amenity-title"));
              $('#amenity-description').val($(currentElem).data("amenity-desc"));
              $('.property_type').val($(currentElem).attr('type'));
              return $('.property_type').attr('disabled', true);
            } else {
              return window.showDetails(currentElem);
            }
          }
        };
      })(this));
    });
    $('.zoom-in').on('click', function(e) {
      return $('.svg-canvas').removeClass('svg-off');
    });
    $('svg').on('dblclick', '.marker-grp', function(e) {
      var currentElem, currentSvgElem, cx, cy, draggableChildCircle, draggableElem, elemId, object_type;
      window.EDITMODE = true;
      draggableElem = "";
      elemId = $(e.currentTarget).attr('svgid');
      window.currentSvgId = parseInt(elemId);
      currentSvgElem = $(e.currentTarget);
      draw.each((function(i, children) {
        var childId;
        childId = this.attr('svgid');
        if (parseInt(childId) === parseInt(elemId)) {
          this.draggable();
          draggableElem = this;
        }
      }), true);
      draggableChildCircle = draggableElem.first();
      cx = draggableChildCircle.attr('cx');
      cy = draggableChildCircle.attr('cy');
      window.markerPoints = [cx, cy];
      if (draggableElem.hasClass('concentric')) {
        window.canvas_type = 'concentricMarker';
      } else if (draggableElem.hasClass('solid')) {
        window.canvas_type = 'solidMarker';
      } else if (draggableElem.hasClass('earthlocation')) {
        window.canvas_type = 'earthlocationMarker';
      }
      draggableElem.dragend = function(delta, event) {
        var markerPts, newX, newY, newpoints, oldX, oldY, tx, ty;
        markerPts = window.markerPoints;
        oldX = markerPts[0];
        oldY = markerPts[1];
        tx = delta.x;
        ty = delta.y;
        newX = oldX + tx;
        newY = oldY + ty;
        newpoints = [newX, newY];
        return window.markerPoints = newpoints;
      };
      currentElem = e.currentTarget;
      $('.edit-box').removeClass('hidden');
      object_type = $(currentElem).attr('type');
      $('.submit').addClass('hidden');
      $('.edit').removeClass('hidden');
      $('.delete').removeClass('hidden');
      if (object_type === "project") {
        window.loadProjectForm();
      } else {
        window.loadForm(object_type);
      }
      if ($(currentElem).data("primary-breakpoint")) {
        $('[name="check_primary"]').prop('checked', true);
      }
      if (object_type === "amenity") {
        $('#amenity-title').val($(currentElem).data("amenity-title"));
        $('#amenity-description').val($(currentElem).data("amenity-desc"));
        $('.property_type').val($(currentElem).attr('type'));
        return $('.property_type').attr('disabled', true);
      } else {
        return window.showDetails(currentElem);
      }
    });
    $('.submit').on('click', function(e) {
      var propType;
      if ($('.property_type').val() === "") {
        $('.alert').text('Unit not assigned');
        window.hideAlert();
        return false;
      }
      if ($('.units').val() === "") {
        $('.alert').text('Unit not assigned');
        window.hideAlert();
        return false;
      }
      if (($('.area').val() === "") && (window.canvas_type === "polygon")) {
        $('.alert').text('Coordinates not marked');
        window.hideAlert();
        return false;
      }
      if ((window.markerPoints.length < 1) && (window.canvas_type !== "polygon")) {
        $('.alert').text('Coordinates not marked');
        window.hideAlert();
        return false;
      }
      if (window.coord === 1) {
        $('.alert').text('Already assigned');
        window.hideAlert();
        return false;
      }
      propType = $('.property_type').val();
      if ((propType === "amenity") && ($('#amenity-title').val() === "")) {
        $('.alert').text('Amenity title not entered');
        window.hideAlert();
        return false;
      }
      return window.saveUnit();
    });
    $('.edit').on('click', function(e) {
      var myObject, propType, svgElemId;
      if ($('.property_type').val() === "") {
        $('.alert').text('Unit not assigned');
        window.hideAlert();
        return false;
      }
      if ($('.units').val() === "") {
        $('.alert').text('Unit not assigned');
        window.hideAlert();
        return false;
      }
      if (($('.area').val() === "") && (window.canvas_type === "polygon")) {
        $('.alert').text('Coordinates not marked');
        window.hideAlert();
        return false;
      }
      if ((window.markerPoints.length < 1) && (window.canvas_type !== "polygon")) {
        $('.alert').text('Coordinates not marked');
        window.hideAlert();
        return false;
      }
      propType = $('.property_type').val();
      if ((propType === "amenity") && ($('#amenity-title').val() === "")) {
        $('.alert').text('Amenity title not entered');
        window.hideAlert();
        return false;
      }
      myObject = window.buildSvgObjectData();
      myObject['_method'] = 'PUT';
      svgElemId = window.currentSvgId;
      return $.ajax({
        type: 'POST',
        headers: {
          'x-csrf-token': $("meta[name='csrf-token']").attr('content')
        },
        url: BASEURL + "/admin/project/" + PROJECTID + "/svg-tool/" + svgElemId,
        async: false,
        data: $.param(myObject),
        success: function(response) {
          var indexToSplice, types;
          indexToSplice = -1;
          $.each(window.svgData.data, function(index, value) {
            if (parseInt(value.id) === svgElemId) {
              return indexToSplice = index;
            }
          });
          window.svgData.data.splice(indexToSplice, 1);
          myObject['id'] = svgElemId;
          window.svgData.data.push(myObject);
          draw.clear();
          types = window.getPendingObjects(window.svgData);
          window.showPendingObjects(types);
          window.generateSvg(window.svgData.data);
          return window.resetTool();
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    });
    $('.property_type').on('change', function(e) {
      var type;
      type = $(e.target).val();
      return window.loadForm(type);
    });
    $('.clear').on('click', function(e) {
      var canvas, ctx;
      $('.area').val("");
      window.f = [];
      canvas = document.getElementById("c");
      ctx = canvas.getContext("2d");
      return ctx.clearRect(0, 0, canvas.width, canvas.height);
    });
    window.setToggle = function() {
      return $(".toggle").click(function() {
        $(".toggle").toggleClass("expanded");
        return $('.menu').toggleClass('open');
      });
    };
    $('.closeform').on('click', function(e) {
      var canvas, ctx;
      $('.area').val("");
      window.f = [];
      canvas = document.getElementById("c");
      ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      $("form").trigger("reset");
      $('#dynamice-region').empty();
      $('#aj-imp-builder-drag-drop canvas').hide();
      $('#aj-imp-builder-drag-drop svg').show();
      $('.edit-box').addClass('hidden');
      draw.each((function(i, children) {
        this.draggable();
        return this.fixed();
      }), true);
      draw.clear();
      window.EDITMODE = false;
      return window.loadSVGData();
    });
    $('.delete').on('click', function(e) {
      var id, myObject, svgElemId;
      myObject = {};
      myObject['_method'] = 'DELETE';
      id = $('.units').val();
      svgElemId = window.currentSvgId;
      return $.ajax({
        type: 'POST',
        headers: {
          'x-csrf-token': $("meta[name='csrf-token']").attr('content')
        },
        url: BASEURL + "/admin/project/" + PROJECTID + "/svg-tool/" + svgElemId,
        async: false,
        data: $.param(myObject),
        success: function(response) {
          var bldg, indexToSplice, obj_id_deleted, obj_type, types, unit;
          indexToSplice = -1;
          obj_id_deleted = 0;
          obj_type = "";
          $.each(window.svgData.data, function(index, value) {
            if (parseInt(value.id) === svgElemId) {
              indexToSplice = index;
              obj_id_deleted = parseInt(value.object_id);
              return obj_type = value.object_type;
            }
          });
          window.svgData.data.splice(indexToSplice, 1);
          myObject['id'] = svgElemId;
          if (obj_id_deleted > 0) {
            if (obj_type === "building") {
              bldg = buildingCollection.findWhere({
                'id': obj_id_deleted
              });
              buildingCollection.bldg;
            } else if (obj_type === "project") {
              window.is_project_marked = false;
            } else {
              unit = unitMasterCollection.findWhere({
                'id': obj_id_deleted
              });
              unitCollection.add(unit);
            }
          }
          draw.clear();
          window.generateSvg(window.svgData.data);
          types = window.getPendingObjects(window.svgData);
          window.showPendingObjects(types);
          return window.resetTool();
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    });
    $('.btn-publish-svg').on('click', function(e) {
      var data, postUrl, publishSvgOptions, svgExport, viewboxDefault;
      e.preventDefault();
      if (window.EDITMODE === true) {
        $('.alert').text('Please save svg elements before publish');
        window.hideAlert();
        return false;
      }
      viewboxDefault = draw.viewbox();
      draw.viewbox(0, 0, viewboxDefault.width, viewboxDefault.height);
      $('#aj-imp-builder-drag-drop svg').first().css("position", "");
      svgExport = draw.exportSvg({
        exclude: function() {
          return this.data('exclude');
        },
        whitespace: true
      });
      $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
      data = {};
      data['data'] = btoa(svgExport);
      data['svg_type'] = window.svgData.svg_type;
      data['breakpoint_position'] = window.breakpoint_position;
      data['building'] = building_id;
      data['imgID'] = IMAGEID;
      draw.viewbox(0, 0, viewboxDefault.width, viewboxDefault.height);
      postUrl = BASEURL + "/admin/project/" + PROJECTID + "/image/" + IMAGEID + "/downloadSvg";
      publishSvgOptions = {
        type: 'POST',
        url: postUrl,
        headers: {
          'x-csrf-token': $("meta[name='csrf-token']").attr('content')
        },
        data: data,
        async: false
      };
      return $.ajax(publishSvgOptions).done((function(_this) {
        return function(resp, textStatus, xhr) {
          $('.alert').text('SVG Published');
          return window.hideAlert();
        };
      })(this)).fail((function(_this) {
        return function(xhr, textStatus, errorThrown) {
          $('.alert').text('Failed to publish SVG');
          return window.hideAlert();
        };
      })(this));
    });
    $('svg').on('contextmenu', '.polygon-type', function(e) {
      var currentElem, newPoints, pointList;
      e.preventDefault();
      $('.alert').text('Polygon duplicated, drag to position');
      window.hideAlert();
      currentElem = e.currentTarget;
      if (/(^|\s)marker-grp(\s|$)/.test($(currentElem).attr("class"))) {
        return false;
      }
      newPoints = window.addPoints($(e.target).attr('points'));
      window.canvas_type = "polygon";
      pointList = window.polygon.getPointList(f);
      pointList = pointList.join(' ');
      this.polygon = draw.polygon(pointList);
      this.polygon.addClass('polygon-temp');
      this.polygon.data('exclude', true);
      this.polygon.attr('fill', '#CC0000');
      this.polygon.draggable();
      return this.polygon.dragend = (function(_this) {
        return function(delta, event) {
          var canvas, canvasPointsLength, ctx, i, newX, newY, oldPoints, tx, ty;
          tx = delta.x;
          ty = delta.y;
          canvasPointsLength = window.f.length;
          oldPoints = window.f;
          newPoints = [];
          i = 0;
          while (i < canvasPointsLength) {
            newX = parseInt(oldPoints[i]) + tx;
            newY = parseInt(oldPoints[i + 1]) + ty;
            newPoints.push(newX, newY);
            i += 2;
          }
          window.f = newPoints;
          $('.area').val(newPoints.join(','));
          canvas = document.getElementById("c");
          ctx = canvas.getContext("2d");
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          _this.polygon.fixed();
          _this.polygon.remove();
          $('#aj-imp-builder-drag-drop canvas').show();
          $('#aj-imp-builder-drag-drop .svg-draw-clear').show();
          $('#aj-imp-builder-drag-drop svg').first().css("position", "absolute");
          $('.edit-box').removeClass('hidden');
          $("form").trigger("reset");
          $('.edit').addClass('hidden');
          $('.delete').addClass('hidden');
          $('.submit').removeClass('hidden');
          $('.property_type').attr('disabled', false);
          return drawPoly(window.f);
        };
      })(this);
    });
    window.addPoints = function(points) {
      var newPoints;
      points = points.replace(/\s/g, ',');
      window.f = points.split(',');
      newPoints = [];
      $.each(window.f, function(index, value) {
        return newPoints.push(parseInt(value) + 5);
      });
      return newPoints;
    };
    $('.duplicate').on('click', function(evt) {
      return $('#myModal').modal();
    });
    $('.process').on('click', function(evt) {
      var imageid;
      imageid = $('.svgPaths').val();
      if (imageid === "") {
        $('.alert2').text('Please select an SVG!');
        window.hideLabel();
        return;
      }
      $('.svg-canvas').hide();
      $('#myModal').modal('hide');
      $('#rotate_loader').removeClass('hidden');
      return $.ajax({
        type: 'GET',
        url: BASEURL + '/admin/project/' + PROJECTID + '/image/' + image_id + '/duplicate_image_id/' + imageid,
        async: false,
        success: function(response) {
          window.svgData['data'] = response.data;
          draw.clear();
          window.generateSvg(window.svgData.data);
          $('#rotate_loader').addClass('hidden');
          $('.svg-canvas').show();
          return $('.duplicate').hide();
        },
        error: function(response) {
          return alert('Some problem occurred');
        }
      });
    });
    return $('.amenity').on('mouseover', function(e) {
      var html;
      window.iniTooltip();
      html = '<div class="row"> <div class="col-sm-12 b-r"> <h4 class="text-warning margin-none">' + $(e.currentTarget).attr('data-amenity-title') + '</h4> <h6 class="text-muted">' + $(e.currentTarget).attr('data-amenity-desc') + '</h6> </div> </div>';
      return $('.amenity').tooltipster('content', html);
    });
  });

}).call(this);

//# sourceMappingURL=../authoring-tool/svg.authoring.controller.js.map
(function() {
  jQuery(document).ready(function($) {
    AuthoringTool.addInitializer(function() {
      return Backbone.history.start();
    });
    return AuthoringTool.start();
  });

}).call(this);

//# sourceMappingURL=../authoring-tool/application.js.map
//# sourceMappingURL=authoringtool.application.min.js.map