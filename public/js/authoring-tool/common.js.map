{"version":3,"sources":["authoring-tool/common.coffee"],"names":[],"mappings":"AAAA;AAAA,EAAA,MAAA,CAAO,QAAP,CAAgB,CAAC,KAAjB,CAAuB,SAAC,CAAD,GAAA;AAItB,IAAA,MAAM,CAAC,OAAP,GAAiB;AAAA,MACb,OAAA,EAAQ,EADK;AAAA,MAEb,MAAA,EAAS;QACN;AAAA,UACC,IAAA,EAAO,CADR;AAAA,UAEC,MAAA,EAAS,OAFV;AAAA,UAGC,MAAA,EAAS,SAHV;AAAA,UAIC,aAAA,EAAgB,SAJjB;AAAA,UAKC,SAAA,EAAY;AAAA,YAAC,OAAA,EAAQ,QAAT;WALb;AAAA,UAMC,QAAA,EAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CANb;SADM,EASN;AAAA,UACC,IAAA,EAAO,CADR;AAAA,UAEC,MAAA,EAAS,OAFV;AAAA,UAGC,MAAA,EAAS,SAHV;AAAA,UAIC,aAAA,EAAgB,EAJjB;AAAA,UAKC,SAAA,EAAY,EALb;AAAA,UAMC,QAAA,EAAY,EANb;SATM,EAiBN;AAAA,UACC,IAAA,EAAO,CADR;AAAA,UAEC,MAAA,EAAS,OAFV;AAAA,UAGC,MAAA,EAAS,SAHV;AAAA,UAIC,aAAA,EAAgB,SAJjB;AAAA,UAKC,SAAA,EAAY;AAAA,YAAC,OAAA,EAAQ,QAAT;WALb;AAAA,UAMC,QAAA,EAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,CANb;SAjBM,EAyBN;AAAA,UACC,IAAA,EAAO,CADR;AAAA,UAEC,MAAA,EAAS,OAFV;AAAA,UAGC,MAAA,EAAS,SAHV;AAAA,UAIC,aAAA,EAAgB,SAJjB;AAAA,UAKC,SAAA,EAAY;AAAA,YAAC,OAAA,EAAQ,QAAT;WALb;AAAA,UAMC,QAAA,EAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CANb;SAzBM,EAiCN;AAAA,UACC,IAAA,EAAO,CADR;AAAA,UAEC,MAAA,EAAS,OAFV;AAAA,UAGC,MAAA,EAAS,SAHV;AAAA,UAIC,aAAA,EAAgB,EAJjB;AAAA,UAKC,SAAA,EAAY,EALb;AAAA,UAMC,QAAA,EAAY,EANb;SAjCM,EAyCN;AAAA,UACC,IAAA,EAAM,CADP;AAAA,UAEC,MAAA,EAAS,UAFV;AAAA,UAGC,MAAA,EAAS,YAHV;AAAA,UAIC,aAAA,EAAgB,EAJjB;AAAA,UAKC,SAAA,EAAY,EALb;AAAA,UAMC,QAAA,EAAY,EANb;SAzCM;OAFI;AAAA,MAsDb,iBAAA,EAAoB,CAAC,OAAD,EAAS,UAAT,CAtDP;KAAjB,CAAA;AAAA,IAyDA,MAAM,CAAC,SAAP,GAAmB,SAAC,OAAD,GAAA;AAClB,MAAA,MAAM,CAAC,MAAP,GAAgB,QAAQ,CAAC,eAAT,CAAyB,4BAAzB,EAAuD,KAAvD,CAAhB,CAAA;AAAA,MACA,MAAM,CAAC,YAAP,CAAoB,IAApB,EAA0B,SAA1B,CADA,CAAA;AAAA,MAEA,MAAM,CAAC,YAAP,CAAoB,OAApB,EAA6B,yBAA7B,CAFA,CAAA;AAAA,MAGA,MAAM,CAAC,YAAP,CAAoB,OAApB,EAA6B,MAA7B,CAHA,CAAA;AAAA,MAIA,MAAM,CAAC,YAAP,CAAoB,QAApB,EAA8B,MAA9B,CAJA,CAAA;AAAA,MAKA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,GAA3B,EAA+B,GAA/B,CALA,CAAA;AAAA,MAMA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,GAA3B,EAA+B,GAA/B,CANA,CAAA;AAAA,MASA,MAAM,CAAC,cAAP,CAAsB,+BAAtB,EAAuD,aAAvD,EAAsE,8BAAtE,CATA,CAAA;AAAA,MAWA,MAAM,CAAC,cAAP,CAAA,CAXA,CAAA;aAYA,CAAC,CAAC,IAAF,CAAO,OAAP,EAAe,SAAC,KAAD,EAAO,KAAP,GAAA;AAEd,YAAA,GAAA;AAAA,QAAA,IAAG,KAAK,CAAC,WAAN,KAAqB,SAAxB;AACC,UAAA,GAAA,GAAM,MAAM,CAAC,OAAO,CAAC,gBAAf,CAAgC,KAAhC,CAAN,CAAA;AACA,UAAA,IAAG,CAAA,CAAE,CAAC,OAAF,CAAU,GAAV,CAAJ;AACC,YAAA,MAAM,CAAC,WAAP,CAAmB,GAAnB,CAAA,CADD;WAFD;SAAA;AAIA,QAAA,IAAG,KAAK,CAAC,IAAN,KAAc,QAAjB;iBACC,MAAM,CAAC,MAAM,CAAC,eAAd,CAA8B,KAA9B,EADD;SANc;MAAA,CAAf,EAbkB;IAAA,CAzDnB,CAAA;AAAA,IAoFA,MAAM,CAAC,cAAP,GAAuB,SAAA,GAAA;AACtB,UAAA,MAAA;AAAA,MAAA,MAAA,GAAS,QAAQ,CAAC,eAAT,CAAyB,4BAAzB,EAAsD,OAAtD,CAAT,CAAA;AAAA,MACA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,QAA3B,EAAoC,MAApC,CADA,CAAA;AAAA,MAEA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,OAA3B,EAAmC,MAAnC,CAFA,CAAA;AAAA,MAGA,MAAM,CAAC,cAAP,CAAsB,8BAAtB,EAAqD,MAArD,EAA6D,MAA7D,CAHA,CAAA;AAAA,MAIA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,GAA3B,EAA+B,GAA/B,CAJA,CAAA;AAAA,MAKA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,GAA3B,EAA+B,GAA/B,CALA,CAAA;AAAA,MAMA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,YAA5B,EAA0C,SAA1C,CANA,CAAA;aAOA,MAAM,CAAC,WAAP,CAAmB,MAAnB,EARsB;IAAA,CApFvB,CAAA;AAAA,IAgGA,MAAM,CAAC,WAAP,GAAoB,SAAC,IAAD,GAAA;aACnB,CAAC,CAAC,IAAF,CAAO,IAAP,EAAY,SAAC,KAAD,EAAO,KAAP,GAAA;eACX,CAAA,CAAE,GAAA,GAAI,KAAN,CAAY,CAAC,WAAb,CAAyB,QAAzB,EADW;MAAA,CAAZ,EADmB;IAAA,CAhGpB,CAAA;AAAA,IAqGA,MAAM,CAAC,aAAP,GAAsB,SAAC,IAAD,GAAA;AACrB,UAAA,OAAA;AAAA,MAAA,OAAA,GAAU,IAAI,CAAC,OAAL,CAAa,IAAb,CAAV,CAAA;aACA,OAAO,CAAC,SAAR,CAAA,EAFqB;IAAA,CArGtB,CAAA;AAAA,IAyGA,MAAM,CAAC,iBAAP,GAA4B,SAAC,OAAD,GAAA;AAC3B,UAAA,gCAAA;AAAA,MAAA,IAAA,GAAO,EAAP,CAAA;AAAA,MACA,UAAA,GAAiB,IAAA,QAAQ,CAAC,UAAT,CAAoB,OAAO,CAAC,IAA5B,CADjB,CAAA;AAAA,MAMA,cAAA,GAAiB,OAAO,CAAC,eANzB,CAAA;AAAA,MAOA,cAAA,GAAiB,CAAC,CAAC,IAAF,CAAO,cAAP,CAPjB,CAAA;AAAA,MAQA,CAAC,CAAC,IAAF,CAAO,cAAP,EAAuB,SAAC,KAAD,EAAO,KAAP,GAAA;AACtB,YAAA,aAAA;AAAA,QAAA,KAAA,GAAQ,UAAU,CAAC,KAAX,CACL;AAAA,UAAA,MAAA,EAAS,KAAT;SADK,CAAR,CAAA;AAAA,QAEA,MAAA,GAAS,EAFT,CAAA;AAAA,QAGA,CAAC,CAAC,IAAF,CAAO,KAAP,EAAa,SAAC,GAAD,EAAK,GAAL,GAAA;AACZ,UAAA,IAAG,CAAA,CAAE,CAAC,OAAF,CAAU,GAAG,CAAC,GAAJ,CAAQ,aAAR,CAAV,CAAJ;mBACC,MAAM,CAAC,IAAP,CAAY,GAAZ,EADD;WADY;QAAA,CAAb,CAHA,CAAA;eAOA,IAAI,CAAC,IAAL,CACC;AAAA,UAAA,MAAA,EAAS,KAAT;AAAA,UACA,IAAA,EAAS,KADT;AAAA,UAEA,OAAA,EAAU,KAAK,CAAC,MAFhB;AAAA,UAGA,QAAA,EAAW,MAAM,CAAC,MAHlB;SADD,EARsB;MAAA,CAAvB,CARA,CAAA;AAAA,MAqBA,CAAC,CAAC,IAAF,CAAO,IAAP,EAAY,SAAC,KAAD,EAAO,KAAP,GAAA;AACX,QAAA,IAAG,KAAK,CAAC,KAAN,KAAe,CAAlB;iBACC,IAAA,GAAO,CAAC,CAAC,OAAF,CAAU,IAAV,EAAgB,KAAhB,EADR;SADW;MAAA,CAAZ,CArBA,CAAA;aAyBA,KA1B2B;IAAA,CAzG5B,CAAA;WAqIA,MAAM,CAAC,kBAAP,GAA4B,SAAC,IAAD,GAAA;AAC3B,UAAA,IAAA;AAAA,MAAA,IAAA,GAAO,EAAP,CAAA;AAAA,MACA,CAAC,CAAC,IAAF,CAAO,IAAP,EAAa,SAAC,KAAD,EAAO,KAAP,GAAA;eACZ,IAAA,IAAQ,2FAAA,GACN,UADM,GACK,KAAK,CAAC,MADX,GACkB,GADlB,GACsB,KAAK,CAAC,IAD5B,GACiC,gBADjC,GACkD,KAAK,CAAC,KADxD,GAC8D,GAD9D,GACkE,KAAK,CAAC,IADxE,GAC6E,eAFzE;MAAA,CAAb,CADA,CAAA;aAIA,CAAA,CAAE,UAAF,CAAa,CAAC,IAAd,CAAmB,IAAnB,EAL2B;IAAA,EAzIN;EAAA,CAAvB,CAAA,CAAA;AAAA","file":"authoring-tool/common.js","sourceRoot":"/source/","sourcesContent":["jQuery(document).ready ($)->\r\n\t\r\n\r\n\t\t\r\n\twindow.svgData = {\r\n\t\t\t\t\t'image':''\r\n\t\t\t\t\t'data' : [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' : 1,\r\n\t\t\t\t\t\t\t\t\t'type' : 'villa',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Villa 1',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : 'polygon',\r\n\t\t\t\t\t\t\t\t\t'details' : {'class':'marked'},\r\n\t\t\t\t\t\t\t\t\t'points'  : [\"359\", \"332\", \"418\", \"365\", \"345\", \"359\"]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' : 2,\r\n\t\t\t\t\t\t\t\t\t'type' : 'villa',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Villa 2',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : '',\r\n\t\t\t\t\t\t\t\t\t'details' : '',\r\n\t\t\t\t\t\t\t\t\t'points'  : []\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' : 3,\r\n\t\t\t\t\t\t\t\t\t'type' : 'villa',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Villa 3',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : 'polygon',\r\n\t\t\t\t\t\t\t\t\t'details' : {'class':'marked'},\r\n\t\t\t\t\t\t\t\t\t'points'  : [\"425\", \"485\", \"459\", \"501\", \"457\", \"547\", \"408\", \"550\"]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' : 4,\r\n\t\t\t\t\t\t\t\t\t'type' : 'villa',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Villa 4',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : 'polygon',\r\n\t\t\t\t\t\t\t\t\t'details' : {'class':'marked'},\r\n\t\t\t\t\t\t\t\t\t'points'  : [\"629\", \"490\", \"667\", \"476\", \"704\", \"474\", \"709\", \"499\", \"706\", \"536\", \"635\", \"539\"]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' : 5,\r\n\t\t\t\t\t\t\t\t\t'type' : 'villa',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Villa 5',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : '',\r\n\t\t\t\t\t\t\t\t\t'details' : '',\r\n\t\t\t\t\t\t\t\t\t'points'  : []\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'id' :6,\r\n\t\t\t\t\t\t\t\t\t'type' : 'building',\r\n\t\t\t\t\t\t\t\t\t'name' : 'Building 1',\r\n\t\t\t\t\t\t\t\t\t'canvas_type' : '',\r\n\t\t\t\t\t\t\t\t\t'details' : '',\r\n\t\t\t\t\t\t\t\t\t'points'  : []\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t'supported_types' : ['villa','building']\r\n\t\t\t\t}\r\n\t#function to create the svg\r\n\twindow.createSvg = (svgData)->\r\n\t\twindow.rawSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\")\r\n\t\trawSvg.setAttribute('id', 'Layer_1')\r\n\t\trawSvg.setAttribute('style', 'border: 1px solid black')\r\n\t\trawSvg.setAttribute('width', '100%')\r\n\t\trawSvg.setAttribute('height', '100%')\r\n\t\trawSvg.setAttributeNS(null,'x','0')\r\n\t\trawSvg.setAttributeNS(null,'y','0')\r\n\t\t# rawSvg.setAttributeNS(null,'viewBox','0 0 1600 1095')\r\n\t\t# rawSvg.setAttributeNS(null,'enable-background','new 0 0 1600 1095')\r\n\t\trawSvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\r\n\r\n\t\twindow.createImageTag()\r\n\t\t$.each svgData,(index,value)->\r\n\r\n\t\t\tif value.canvas_type is 'polygon'\r\n\t\t\t\ttag = window.polygon.createPolgyonTag(value)\r\n\t\t\t\tif !_.isEmpty tag \r\n\t\t\t\t\trawSvg.appendChild tag\r\n\t\t\tif value.type is 'marker'\r\n\t\t\t\twindow.marker.createMarkerTag(value)\r\n\t\t\r\n\t\t\r\n\r\n\r\n\r\n\t#function to create image tag\r\n\twindow.createImageTag =()->\t\r\n\t\tsvgimg = document.createElementNS('http://www.w3.org/2000/svg','image')\r\n\t\tsvgimg.setAttributeNS(null,'height','100%')\r\n\t\tsvgimg.setAttributeNS(null,'width','100%')\r\n\t\tsvgimg.setAttributeNS('http://www.w3.org/1999/xlink','href', svgImg)\r\n\t\tsvgimg.setAttributeNS(null,'x','0')\r\n\t\tsvgimg.setAttributeNS(null,'y','0')\r\n\t\tsvgimg.setAttributeNS(null, 'visibility', 'visible')\r\n\t\trawSvg.appendChild(svgimg)\r\n\r\n\r\n\t#function to create left side panel\r\n\twindow.createPanel =(data)->\r\n\t\t$.each data,(index,value)->\r\n\t\t\t$('.'+value).removeClass 'hidden'\r\n\t\t\t\r\n\t#function to create left side panel\r\n\twindow.makeDraggable =(data)->\t\r\n\t\telement = draw.polygon(data)\r\n\t\telement.draggable()\r\n\r\n\twindow.getPendingObjects  = (svgData)->\r\n\t\ttype = []\r\n\t\tcollection = new Backbone.Collection svgData.data\r\n\t\t# uniqTypes = _.pluck svgData , 'type'\r\n\t\t# uniqTypes = _.uniq uniqTypes\r\n\t\t# supportedTypes = svgData.supported_types.map (item)->\r\n\t\t# \treturn s.capitalize item\r\n\t\tsupportedTypes = svgData.supported_types\r\n\t\tsupportedTypes = _.uniq supportedTypes\r\n\t\t$.each supportedTypes ,(index,value)->\r\n\t\t\titems = collection.where\r\n\t\t\t\t\t\t'type' : value\r\n\t\t\tmarked = []\r\n\t\t\t$.each items,(ind,val)->\r\n\t\t\t\tif !_.isEmpty val.get('canvas_type')\r\n\t\t\t\t\tmarked.push val\r\n\r\n\t\t\ttype.push\r\n\t\t\t\t'name' : value\r\n\t\t\t\t'id'   : value\r\n\t\t\t\t'total' : items.length\r\n\t\t\t\t'marked' : marked.length\r\n\t\t$.each type,(index,value)->\r\n\t\t\tif value.total is 0\r\n\t\t\t\ttype = _.without(type, value)\r\n\r\n\t\ttype\r\n\r\n\twindow.showPendingObjects = (data)->\r\n\t\thtml = ''\r\n\t\t$.each data ,(index,value)->\r\n\t\t\thtml += '<strong class=\"pull-right\" style=\"line-height:70px;margin-right: 20px;  color: #FF7E00;\">'+\r\n\t\t\t\t\t'Marked: '+value.marked+' '+value.name+'(s) | Total : '+value.total+' '+value.name+'(s)</strong>'\r\n\t\t$('.pending').html html"]}