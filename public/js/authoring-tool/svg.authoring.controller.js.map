{"version":3,"sources":["authoring-tool/svg.authoring.controller.coffee"],"names":[],"mappings":"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","file":"authoring-tool/svg.authoring.controller.js","sourceRoot":"/source/","sourcesContent":["#Primary File\r\n#using svg.js\r\n#Function to render objects based upon the object type(*) - useful when we want to display a specific object type\r\n# In ths case only those objects will be highlighted\r\n#Function to render all objects which internally calls (*) for each object type\r\n#Function to show a specific object based on the object id\r\n#Function to show the left hand side depending upon the supported object types\r\n#Function to switch to edit mode\r\n#Function to show the options depending on whether object is marked or not\r\n#Function to count the number of pending objects\r\njQuery(document).ready ($)->\r\n\t$('.area').canvasAreaDraw()\r\n\twindow.draw = SVG('aj-imp-builder-drag-drop')\r\n\t\r\n\twindow.svgData = {\r\n\t\t\t\t\t'image':''\r\n\t\t\t\t\t'data' : []\r\n\t\t\t\t\t'supported_types' : ['villa','plot']\r\n\t\t\t\t}\r\n\t#function to create the svg\r\n\twindow.createSvg = (svgData)->\r\n\t\twindow.rawSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\")\r\n\t\trawSvg.setAttribute('id', 'Layer_1')\r\n\t\trawSvg.setAttribute('style', 'border: 1px solid black')\r\n\t\trawSvg.setAttribute('width', '100%')\r\n\t\trawSvg.setAttribute('height', '100%')\r\n\t\trawSvg.setAttributeNS(null,'x','0')\r\n\t\trawSvg.setAttributeNS(null,'y','0')\r\n\t\t# rawSvg.setAttributeNS(null,'viewBox','0 0 1600 1095')\r\n\t\t# rawSvg.setAttributeNS(null,'enable-background','new 0 0 1600 1095')\r\n\t\trawSvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\r\n\r\n\t\twindow.createImageTag()\r\n\t\t$.each svgData,(index,value)->\r\n\r\n\t\t\tif value.canvas_type == 'polygon'\r\n\t\t\t\ttag = window.polygon.createPolgyonTag(value)\r\n\t\t\t\tif tag != \"\"\r\n\t\t\t\t\twindow.makeDraggable()\r\n\t\t\t\t\trawSvg.appendChild tag\r\n\t\t\tif value.type == 'marker'\r\n\t\t\t\twindow.marker.createMarkerTag(value)\r\n\t\t\r\n\t\t\r\n\r\n\r\n\r\n\t#function to create image tag\r\n\twindow.createImageTag =()->\t\r\n\t\tsvgimg = document.createElementNS('http://www.w3.org/2000/svg','image')\r\n\t\tsvgimg.setAttributeNS(null,'height','800')\r\n\t\tsvgimg.setAttributeNS(null,'width','1600')\r\n\t\tsvgimg.setAttributeNS('http://www.w3.org/1999/xlink','href', svgImg)\r\n\t\tsvgimg.setAttributeNS(null,'x','0')\r\n\t\tsvgimg.setAttributeNS(null,'y','0')\r\n\t\tsvgimg.setAttributeNS(null, 'visibility', 'visible')\r\n\t\trawSvg.appendChild(svgimg)\r\n\r\n\t#function to create left side panel\r\n\twindow.createPanel =(data)->\r\n\t\t$.each data,(index,value)->\r\n\t\t\t$('.'+value).removeClass 'hidden'\r\n\t\t\t\r\n\t#function to create left side panel\r\n\twindow.makeDraggable =(data)->\t\r\n\t\telement = draw.polygon(data)\r\n\t\telement.draggable()\r\n\t\r\n\twindow.getPendingObjects  = (svgData)->\r\n\t\ttype = []\r\n\t\tcollection = new Backbone.Collection svgData.data\r\n\t\t# uniqTypes = _.pluck svgData , 'type'\r\n\t\t# uniqTypes = _.uniq uniqTypes\r\n\t\t# supportedTypes = svgData.supported_types.map (item)->\r\n\t\t# \treturn s.capitalize item\r\n\t\tsupportedTypes = svgData.supported_types\r\n\t\tconsole.log supportedTypes = _.uniq supportedTypes\r\n\t\t$.each supportedTypes ,(index,value)->\r\n\t\t\titems = collection.where\r\n\t\t\t\t\t\t'type' : value\r\n\t\t\tmarked = []\r\n\t\t\t$.each items,(ind,val)->\r\n\t\t\t\tif !_.isEmpty val.get('canvas_type')\r\n\t\t\t\t\tmarked.push val\r\n\r\n\t\t\ttype.push\r\n\t\t\t\t'name' : value\r\n\t\t\t\t'id'   : value\r\n\t\t\t\t'total' : items.length\r\n\t\t\t\t'marked' : marked.length\r\n\t\t# $.each type,(index,value)->\r\n\t\t# \tif value.total is 0\r\n\t\t# \t\ttype = _.without(type, value)\r\n\r\n\t\ttype\r\n\r\n\r\n\twindow.showPendingObjects = (data)->\r\n\t\thtml = ''\r\n\t\t$.each data ,(index,value)->\r\n\t\t\thtml += '<strong class=\"pull-right\" style=\"line-height:70px;margin-right: 20px;  color: #FF7E00;\">'+\r\n\t\t\t\t\t'Marked: '+value.marked+' '+value.name+'(s) | Total : '+value.total+' '+value.name+'(s)</strong>'\r\n\t\t$('.pending').html html\r\n\r\n\r\n\twindow.generatePropTypes = ()->\r\n\t\ttypes = window.svgData.supported_types\r\n\t\tselect = $('.property_type')\r\n\t\t$('<option />', {value: \"\", text: 'Select option'}).appendTo(select)\r\n\t\t$.each types , (index,value)->\r\n\t\t\t$('<option />', {value: value, text: value.toUpperCase()}).appendTo(select)\r\n\r\n\t\tconsole.log $('.property_type')\r\n\r\n\r\n\twindow.createSvg(window.svgData.data)\r\n\twindow.generatePropTypes()\r\n\ttypes = window.getPendingObjects(window.svgData) \r\n\twindow.showPendingObjects(types)\r\n\ts = new XMLSerializer()\r\n\tstr = s.serializeToString(rawSvg)\r\n\tstore = draw.svg(str)\r\n\r\n\t\r\n\r\n\r\n\r\n\t\t\t\r\n\t\t\r\n\r\n\t\t# points1 =  [425, 485, 459, 501, 457, 547, 408, 550]\r\n\t\t# points2 = [629, 490, 667, 476, 704, 474, 709, 499, 706, 536, 635, 539]\r\n\t\t# drawPoly(points1)\r\n\t\t# drawPoly(points2)\r\n\t\t\r\n\r\n\r\n\t$('#aj-imp-builder-drag-drop canvas').ready ->\r\n\t\t$('#aj-imp-builder-drag-drop canvas').hide()\r\n\t\t$('#aj-imp-builder-drag-drop .svg-draw-clear').hide()\r\n\r\n\t# $('#save-svg-elem').on 'click', (e) ->\r\n\t# \tconsole.log \"click save-svg-elem\"\r\n\t# \tnewCoordinates = $('.area').val()\r\n\t# \tnewPoints = newCoordinates.split(',').map((point) ->\r\n\t# \t  parseInt point, 10\r\n\t# \t)\r\n\r\n\t# \teditedElemTypeId = $(\"input[name=svg-element-id]\").val()\r\n\t# \tnewSvgData = svgData\r\n\t# \t_.each svgData.data, (svgDataObject, key) =>\r\n\t# \t\tif svgDataObject.id is parseInt(editedElemTypeId)\r\n\t# \t\t\t# change global svg data with new points\r\n\t# \t\t\tnewSvgData['data'][key]['points'] = newPoints\r\n\t# \t\t\twindow.svgData = newSvgData\r\n\r\n\t# \t\t\t# regenerate newly modified svg element\r\n\r\n\r\n\t# \t$('#aj-imp-builder-drag-drop canvas').hide()\r\n\t# \t$('#aj-imp-builder-drag-drop svg').first().css(\"position\",\"relative\")\r\n\t# \t$(\"input[name=svg-element-id]\").val(\"\")\t\r\n\t# \t$(\".area\").val(\"\")\t\r\n\t$(\".toggle\").click( ()->\r\n\t    $(this).toggleClass(\"expanded\");\r\n\t    $('.menu').toggleClass('open');\r\n\t \r\n\t)\r\n\r\n\t$('.save').on 'dblclick', (e) ->\r\n\t\te.preventDefault()\r\n\t\tconsole.log f\r\n\t\twindow.canvas_type = \"polygon\"\r\n\t\t$('#aj-imp-builder-drag-drop canvas').show()\r\n\t\t$('#aj-imp-builder-drag-drop .svg-draw-clear').show()\r\n\t\t$('#aj-imp-builder-drag-drop svg').first().css(\"position\",\"absolute\")\r\n\t\t$('.edit-box').removeClass 'hidden'\r\n\t\t\r\n\r\n\t$('.villa,.plot').on 'dblclick', (e) ->\r\n\t\te.preventDefault()\r\n\t\twindow.canvas_type = \"polygon\"\r\n\t\t$('#aj-imp-builder-drag-drop canvas').show()\r\n\t\t$('#aj-imp-builder-drag-drop .svg-draw-clear').show()\r\n\t\t$('#aj-imp-builder-drag-drop svg').first().css(\"position\",\"absolute\")\r\n\t\t$('.edit-box').removeClass 'hidden'\r\n\t\tcurrentElem = e.currentTarget.id\r\n\t\tsvgDataObjects = svgData.data\r\n\t\t_.each svgDataObjects, (svgDataObject, key) =>\r\n\t\t\tif parseInt(currentElem) is svgDataObject.id\r\n\t\t\t\tpoints = svgDataObject.points\r\n\t\t\t\tdrawPoly(points)\r\n\t\t\t\t$(\"input[name=svg-element-id]\").val(svgDataObject.id)\r\n\t\r\n\t$('.submit').on 'click', (e) ->\r\n\t\tif  _.isEmpty $('.units').val()\r\n\t\t\t$('.alert').text 'Unit not assigned'\r\n\t\t\treturn false\r\n\t\tif  _.isEmpty $('.area').val() \r\n\t\t\t$('.alert').text 'Coordinates not marked'\r\n\t\t\treturn false\r\n\t\tvalue =  $('.area').val().split(',')\r\n\t\tstore.remove()\r\n\t\tdetails = {}\r\n\t\tdetails['class'] = 'layer '+$('.property_type').val()\r\n\t\tchildEle = {} \r\n\t\tchildEle['id'] = $('.units').val()\r\n\t\tchildEle['name'] = $(\".units option:selected\").text()\r\n\t\tchildEle['type'] = $('.property_type').val()\r\n\t\tchildEle['points'] = value\r\n\t\tchildEle['details'] = details\r\n\t\tchildEle['canvas_type'] = window.canvas_type\r\n\r\n\t\twindow.svgData.data.push childEle\r\n\t\t\r\n\t\twindow.createSvg(window.svgData.data)\r\n\t\ttypes = window.getPendingObjects(window.svgData) \r\n\t\twindow.showPendingObjects(types)\r\n\t\ts = new XMLSerializer()\r\n\t\tstr = s.serializeToString(rawSvg)\r\n\t\tdraw.svg str\r\n\t\t$('.area').val(\"\")\r\n\t\twindow.f = []\r\n\t\t$(\"form\").trigger(\"reset\")\r\n\t\t$('#dynamice-region').empty()\r\n\t\t$(\".toggle\").trigger 'click'\r\n\t\t$('#aj-imp-builder-drag-drop canvas').hide()\r\n\t\t$('#aj-imp-builder-drag-drop svg').show()\r\n\t\t$('.edit-box').addClass 'hidden'\r\n\t\tcanvas = document.getElementById(\"c\")\r\n\t\tctx= canvas.getContext(\"2d\")\r\n\t\tctx.clearRect( 0 , 0 , canvas.width, canvas.height )\r\n\t\t\r\n\t\t\r\n\r\n\t$('.property_type').on 'change', (e) ->\r\n\r\n\t\tif $(e.target).val() is 'villa'\r\n\t\t\t@region =  new Marionette.Region el : '#dynamice-region'\r\n\t\t\tnew AuthoringTool.VillaCtrl region : @region\r\n\t\tif $(e.target).val() is 'plot'\r\n\t\t\t@region =  new Marionette.Region el : '#dynamice-region'\r\n\t\t\tnew AuthoringTool.PlotCtrl region : @region\r\n\r\n\t $('.alert-box')\r\n        .delay(3000)\r\n        .queue( (next)->\r\n        \t$(this).hide('fade') \r\n        \tnext() \r\n    )\r\n\t\r\n\t\r\n\r\n\r\n\t\t\t\r\n\r\n\t\r\n  \r\n\r\n\t \r\n\r\n\r\n\r\n\r\n\r\n\t\r\n   \r\n"]}