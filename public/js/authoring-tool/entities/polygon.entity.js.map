{"version":3,"sources":["authoring-tool/entities/polygon.entity.coffee"],"names":[],"mappings":"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","file":"authoring-tool/entities/polygon.entity.js","sourceRoot":"/source/","sourcesContent":["#Functions of a polygon object\r\n#1.Draw a polygon using svgjs\r\n#2.Function to make polygon draggable\r\n#event handler functions\r\n#3.Function to duplicate a polygon\r\n\r\n#model for Polygon\r\nclass Polygon extends Backbone.Model\r\n\r\n    initialize:->\r\n        @node = \"\"\r\n        @pointList = []\r\n\r\n    createPolgyon:->\r\n        @node = document.createElementNS('http://www.w3.org/2000/svg','polygon')\r\n\r\n    createPolgyonTag:(item)->\r\n        console.log item.other_details.class\r\n        @pointList = []\r\n        @createPolgyon()\r\n        @points(item.points)\r\n        @attribute('class',item.other_details.class)\r\n        @attribute('id',item.object_id)\r\n        @attribute('type',item.object_type)\r\n        @node\r\n\r\n    generatePolygonTag:(item)->\r\n        pointList = @getPointList(item.points)\r\n        pointList = pointList.join(' ')\r\n        \r\n        polygon = draw.polygon(pointList)\r\n\r\n        # add polygon class\r\n        polygon.attr\r\n            'class': item.other_details.class\r\n            'id': item.object_id\r\n            'type': item.object_type\r\n            svgid:  item.id             \r\n\r\n        #set data attributes for title and description if object type is amenity\r\n        if item.object_type is \"amenity\"\r\n            polygon.data('amenity-title', item.other_details.title)\r\n            polygon.data('amenity-desc', item.other_details.description)            \r\n        \r\n        \r\n\r\n        \r\n    getPointList:(pointsArr)->\r\n        pointList = []\r\n\r\n        i= 0\r\n        l = pointsArr.length\r\n        while i < l\r\n            pointList.push([parseInt(pointsArr[i]),parseInt(pointsArr[i+1])])\r\n            i+=2\r\n        \r\n        formattedPoints = []\r\n        k= 0\r\n        len = pointList.length\r\n        \r\n        while k< len\r\n            formattedPoints.push(pointList[k].join())\r\n            k++\r\n\r\n        return formattedPoints\r\n\r\n\r\n    attribute:(key,val)->\r\n        if val == undefined\r\n            return false\r\n        @node.setAttribute(key,val)\r\n\r\n    build:(arg)->\r\n        res = []\r\n        i= 0\r\n        l = arg.length\r\n        while i< l\r\n            res.push(arg[i].join(','))\r\n            i++\r\n        res.join(' ')\r\n\r\n    points:(args)->\r\n        i= 0\r\n        l = args.length\r\n        while i < l\r\n            @pointList.push([args[i],args[i+1]])\r\n            i+=2\r\n        @attribute('points',@build(@pointList))\r\n        @node\r\n\r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\nwindow.polygon = new Polygon\r\n\r\n    \r\n"]}