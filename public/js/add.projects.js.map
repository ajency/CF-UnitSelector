{"version":3,"sources":["add.projects.coffee"],"names":[],"mappings":"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","file":"add.projects.js","sourceRoot":"/source/","sourcesContent":["jQuery(document).ready ($)->\n\t\n\t#global setup\n\t$.ajaxSetup\n        headers:\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\n\t\t\n\t$('form button[type=\"reset\"]').click();\n\t$(\"select\").select2()\n\t\n\twindow.projectsCollection = []\n\t\n\t$('#add_project select[name=\"city\"]').change ->\n\t\t$.ajax\n\t\t\turl : '/some-commonfloor-url'\n\t\t\ttype : 'jsonp'\n\t\t\tsuccess : (resp)->\n\t\t\terror : (resp)->\n\t\t\t\toptions = ''\n\t\t\t\tfor i in [0...10]\n\t\t\t\t\tproject = \n\t\t\t\t\t\tproject_title : faker.name.findName()\n\t\t\t\t\t\tcf_project_id : faker.internet.userName()\n\t\t\t\t\t\tproject_image: faker.image.avatar()\n\t\t\t\t\t\tproject_address : \"#{faker.address.streetAddress()} #{faker.address.city()}, #{faker.address.zipCode()}\"\n\t\t\t\t\t\tproject_status : 'Under Construction'\n\t\t\t\t\t\tbuilder_name : faker.name.findName()\n\t\t\t\t\t\tbuilder_link : faker.internet.domainName()\n\t\t\t\t\t\t\n\t\t\t\t\tprojectsCollection.push project\n\t\t\t\t\toptions += \"<option value='#{project.cf_project_id}'>#{project.project_title}</option>\"\n\t\t\t\t\t\n\t\t\t\t$('#add_project select[name=\"cf_project_id\"]').append options\n\t\t\t\t\n\t\t\n\t$('#add_project select[name=\"cf_project_id\"]').change ->\n\t\tprojectId = $(@).val()\n\t\tproject = _.findWhere window.projectsCollection, 'cf_project_id' : projectId\n\t\t$('[name=\"project_title\"]').val project.project_title\n\t\t$('[name=\"project_address\"]').val project.project_address\n\t\ttemplate = '<div class=\"user-description-box\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-sm-8\">\n\t\t\t\t\t\t\t\t<h4 class=\"semi-bold\">{{ project_title }} - <span class=\"bold text-primary\">{{ cf_project_id }}</span></h4>\n\t\t\t\t\t\t\t\t<i class=\"fa fa-map-marker\"></i> <b>Address:</b>\n\t\t\t\t\t\t\t\t<p>{{ project_address }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-sm-4\">\n\t\t\t\t\t\t\t\t{{#if project_image }} \n\t\t\t\t\t\t\t\t<img src=\"{{ project_image }}\" class=\"img-responsive\">\n\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"alert alert-warning m-t-20\">\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"builder_name\" value={{ builder_name }}/>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"builder_link\" value={{ builder_link }}/>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"project_image\" value={{ project_image }}/>\n\t\t\t\t\t\t\t<strong>Note: </strong> The above information is as entered in CommonFloor database.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'\n\t\t\t\t\n\t\ttempalteFn = Handlebars.compile template\n\t\t$('#commonfloor-project-details').removeClass('hidden').html tempalteFn project\n\t\t\n\tregisterRemovePhaseListener = ->\n\t\t$('.remove-phase').off 'click'\n\t\t$('.remove-phase').on 'click', ->\n\n\t\t\tif confirm('Are you sure you want to delete this phase? \n\t\t\t\t\t\tAll building will be affected with this action. Continue?') is false\n\t\t\t\treturn\n\n\t\t\tphaseId = $(@).attr 'data-phase-id'\n\n\t\t\tsuccessFn = (resp, status, xhr)=>\n\t\t\t\tif xhr.status is 204\n\t\t\t\t\t$(@).closest('.pull-left').remove()\n\n\t\t\t$.ajax \n\t\t\t\turl : \"/admin/phase/#{phaseId}\"\n\t\t\t\ttype : 'DELETE'\n\t\t\t\tdata : \n\t\t\t\t\tphase_id : phaseId\n\t\t\t\tsuccess : successFn\n\t\t\n\t\t\n\t$('.add-phase-btn').click ->\n\t\tphaseName = $('.phase-name').val()\n\t\t\n\t\tsuccessFn = (resp, status, xhr)->\n\t\t\tif xhr.status isnt 201\n\t\t\t\tphaseId = resp.data.phase_id\n\t\t\t\tphasesContainer = $('.phases')\n\t\t\t\thtml = '<div class=\"pull-left m-r-10\">\n\t\t\t\t\t\t\t<strong>{{ phase_name }}</strong>\n\t\t\t\t\t\t\t<button type=\"button\" data-phase-id=\"{{ phase_id }}\" class=\"btn btn-small btn-link remove-phase\">\n\t\t\t\t\t\t\t<span class=\"fa fa-times text-danger\"></span></button>\n\t\t\t\t\t\t</div>'\n\t\t\t\tcompile = Handlebars.compile html\n\t\t\t\tphasesContainer.append compile( { phase_name : phaseName, phase_id : phaseId } )\n\t\t\t\tregisterRemovePhaseListener()\n\t\t\t\n\t\t$.ajax \n\t\t\turl : '/admin/phase'\n\t\t\ttype : 'POST'\n\t\t\tdata : \n\t\t\t\tproject_id : PROJECTID\n\t\t\t\tphase_name : phaseName\n\t\t\tsuccess : successFn\n\t\n#\t$('.property-type > div, .property-type label').hide()\t\n#\t\n#\t$('[name=\"property_types[]\"]').change (evt)->\n#\t\t\n#\t\t$('.property-type > div')\n#\t\t\t.hide()\n#\t\t\t.find 'input'\n#\t\t\t.removeAttr 'required'\n#\t\t\t\n#\t\tpropertyTypes = $(@).val()\n#\n#\t\tif _.isNull propertyTypes\n#\t\t\t$('.property-type label').hide()\n#\t\t\treturn\n#\t\t\n#\t\t$('.property-type label').show()\t\n#\t\t_.each propertyTypes, (propertyType)->\n#\t\t\t$(\".property-type-#{propertyType}\")\n#\t\t\t\t.show()\n#\t\t\t\t.find 'input'\n#\t\t\t\t.attr 'required', true\n#\t\t\t\t\n#\t$('.add-unit-type-btn').click (evt)->\n#\t\ttemplate = '<div class=\"form-inline m-b-10\">\n#\t\t\t\t\t\t<div class=\"form-group\">\n#\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" value=\"{{ unit_type }}\">\n#\t\t\t\t\t\t\t<button class=\"btn btn-small btn-default m-t-5\"><i class=\"fa fa-trash\"></i> Delete</button>\n#\t\t\t\t\t\t</div>\n#\t\t\t\t\t</div>'\n#\t\tvalue = $(@).parent().find('input').val()\n#\t\tif value is ''\n#\t\t\treturn\n#\t\t\n#\t\tdata = \n#\t\t\tunit_type : value\n#\t\tcompileFn = Handlebars.compile template\n#\t\t$(@).closest('.form-inline').before compileFn data\n#\t\t$(@).parent().find('input').val ''\n\t\t\n\t\t"]}