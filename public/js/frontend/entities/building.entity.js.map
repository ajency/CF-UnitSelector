{"version":3,"sources":["frontend/entities/building.entity.coffee"],"names":[],"mappings":"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","file":"frontend/entities/building.entity.js","sourceRoot":"/source/","sourcesContent":["#Building model and Building collection Definition\nclass Building extends Backbone.Model\n\n\n\t#Count the number of units for each unit type in a building\n\tgetUnitTypecount:(building_id)->\n\n\t\tresponse = []\n\t\tif building_id == \"\"\n\t\t\treturn response\n\t\tstatusObject  = settings.get 'status'\n\t\tstatusColl = new Backbone.Collection statusObject\n\t\tstatus  = statusColl.findWhere({'name' : 'Available'})\n\t\tapartmentVariantCollection.each ( item)->\n\t\t\tunits = unitCollection.where({'unit_variant':parseInt(item.get('id'))\n\t\t\t\t,'building_id':parseInt(building_id)\n\t\t\t\t,'status':parseInt(status.get('id'))});\n\n\t\t\tresponse.push({id:item.get('id')\n\t\t\t\t,name:item.get('name')\n\t\t\t\t,count:units.length})\n\n\t\n\t\tresponse\n\n\t#check 3d rotation view available or not\n\tcheckRotationView:(buildingId)->\n\t\tbuildingModel = buildingCollection.findWhere({'building_id':parseInt(buildingId)})\n\t\tif buildingId == \"\"\n\t\t\treturn false\n\t\trotationImages = buildingModel.get('threed_view').image.length\n\t\tif parseInt(rotationImages) >= 4\n\t\t\tbuildingModel.set 'rotation' , 'yes'\n\t\telse\n\t\t\tbuildingModel.set 'rotation' , 'no'\n\n\t\tbuildingModel.get('rotation')\n\n\n\n\nclass BuildingCollection extends Backbone.Collection\n\tmodel : Building\n\t#url to fetch building data\n\turl : ->\n\t\t\"http://commonfloor.local/methods/functions.php?action=load_buildings\"\n\n\t#set the attributes of a building model\n\t# if blank,fetch it from the server with the url mentioned above.\n\tsetBuildingAttributes:(project_id)->\n\n\t\t# @set buildingData\n\t\t\n\t\tif @length == 0 \n\t\t\tbuildingCollection.fetch(\n\t\t\t\tasync : false\n\t\t\t\tdata : \n\t\t\t\t\tproject_id : project_id\n\t\t\t\tsuccess:(collection, response)=>\n\t\t\t\t\tmodel =  collection.models\n\t\t\t\t\tif response == 0\n\t\t\t\t\t\t@reset()\n\n\t\t\t\t)\n\nwindow.buildingCollection  = new BuildingCollection;"]}