{"version":3,"sources":["frontend/entities/building.entity.coffee"],"names":[],"mappings":"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","file":"frontend/entities/building.entity.js","sourceRoot":"/source/","sourcesContent":["#Building model and Building collection Definition\nclass Building extends Backbone.Model\n\n\n\t#Count the number of units for each unit type in a building\n\tgetUnitTypes:(building_id)->\n\n\t\tunitTypes = []\n\t\tif building_id == \"\"\n\t\t\treturn unitTypes\n\t\tunits = unitCollection.where\n\t\t\t\t\t\t'building_id'  : building_id\n\n\t\tunits = new Backbone.Collection units\n\t\tvariants = units.pluck(\"unit_variant_id\") \n\t\t$.each variants,(index,value)->\n\t\t\tvarinatModel = apartmentVariantCollection.findWhere\n\t\t\t\t\t\t\t\t\t'id' : value\n\t\t\tunitTypes.push varinatModel.get 'unit_type_id'\n\n\t\tunitTypes = _.uniq unitTypes\n\t\tunitTypes\n\n\tgetUnitTypesCount:(building_id,unitTypes)->\n\n\t\ttypes = []\n\t\t$.each unitTypes,(ind,val)->\n\t\t\tunitTypeModel = unitTypeCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : val\n\t\t\tvariants = apartmentVariantCollection.where\n\t\t\t\t\t\t\t'unit_type_id' : val\n\t\t\tunits = []\n\t\t\t$.each variants,(index,value)->\n\t\t\t\tunitsColl = unitCollection.where\n\t\t\t\t\t\t\t\t'unit_variant_id' : value.get 'id'\n\t\t\t\t\t\t\t\t'building_id' : building_id\n\n\t\t\t\t$.merge units, unitsColl\n\t\t\ttypes.push \n\t\t\t\t'name' : unitTypeModel.get 'name'\n\t\t\t\t'units' : units.length\n\n\t\ttypes\n\n\n\tgetMinimumArea:(building_id)->\n\t\tunits = unitCollection.where\n\t\t\t\t\t'building_id' : building_id\n\t\ttemp = []\n\t\t$.each units,(index,value)->\n\t\t\tvariants = apartmentVariantCollection.findWhere\n\t\t\t\t\t\t\t'id' : value.get 'unit_variant_id'\n\t\t\ttemp.push variants.get 'super_built_up_area'\n\n\t\t_.min temp\n\n\tgetMinimumCost:(building_id)->\n\t\tunits = unitCollection.where\n\t\t\t\t\t'building_id' : building_id\n\t\ttemp = []\n\t\t$.each units,(index,value)->\n\t\t\tunits = unit.getUnitDetails(value.get('id'))\n\t\t\ttemp.push units[3]\n\n\t\t_.min temp\n\n\n\n\t#check 3d rotation view available or not\n\tcheckRotationView:(buildingId)->\n\t\tbuildingModel = buildingCollection.findWhere({'building_id':parseInt(buildingId)})\n\t\tif buildingId == \"\"\n\t\t\treturn false\n\t\trotationImages = buildingModel.get('threed_view').image.length\n\t\tif parseInt(rotationImages) >= 4\n\t\t\tbuildingModel.set 'rotation' , 'yes'\n\t\telse\n\t\t\tbuildingModel.set 'rotation' , 'no'\n\n\t\tbuildingModel.get('rotation')\n\n\n\tgetBuildingUnits:(building_id)->\n\t\tunits = unitCollection.where\n\t\t\t\t\t'building_id' : building_id\n\n\t\tunits \n\n\tcheckRotationView:(building)->\n\t\ttransitionImages = []\n\t\t$.merge transitionImages , building.get('building_master')['right-front']\n\t\t$.merge transitionImages , building.get('building_master')['back-right']\n\t\t$.merge transitionImages , building.get('building_master')['left-back']\n\t\t$.merge transitionImages , building.get('building_master')['front-left']\n\t\tif parseInt(transitionImages.length) >= 4\n\t\t\t@set 'rotation' , 1\n\t\telse\n\t\t\t@set 'rotation' , 0\n\n\t\t@get('rotation')\n\n\n\n\n\nclass BuildingCollection extends Backbone.Collection\n\tmodel : Building\n\t#url to fetch building data\n\turl : ->\n\t\t\"http://commonfloor.local/methods/functions.php?action=load_buildings\"\n\n\t#set the attributes of a building model\n\t# if blank,fetch it from the server with the url mentioned above.\n\tsetBuildingAttributes:(data)->\n\n\t\t# @set buildingData\n\t\tconsole.log data\n\t\tbuildingCollection.reset data\n\nwindow.buildingCollection  = new BuildingCollection\nwindow.building  = new Building"]}