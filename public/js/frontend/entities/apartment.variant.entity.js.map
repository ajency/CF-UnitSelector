{"version":3,"sources":["frontend/entities/apartment.variant.entity.coffee"],"names":[],"mappings":"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","file":"frontend/entities/apartment.variant.entity.js","sourceRoot":"/source/","sourcesContent":["#Apartment Variant model and Apartment Variant collection Definition\r\nclass ApartmentVariant extends Backbone.Model\r\n\r\n\t#calculate unit price of a model \r\n\tfindUnitPrice:(unitModel)->\r\n\t\tbasicCost = 0.00\r\n\t\tif unitModel not instanceof Backbone.Model || unitModel == \"\"\r\n\t\t\treturn \r\n\t\tunitVarinatModel = apartmentVariantMasterCollection.findWhere({\r\n\t\t\t'id':parseInt(unitModel.get('unit_variant_id'))})\r\n\t\tif ! _.isUndefined unitVarinatModel \r\n\t\t\tfloorRiseArray = settings.generateFloorRise(unitModel.get('building_id'))\r\n\t\t\tfloorRise = floorRiseArray[unitModel.get('floor')]\r\n\t\t\t# basic_cost = ( parseFloat(unitVarinatModel.get('per_sq_ft_price')) + parseFloat(floorRise )) *\r\n\t\t\t# \t\t\t\tparseFloat(unitVarinatModel.get('super_built_up_area'))\r\n\t\t\tbasic_cost = ( parseFloat(unitVarinatModel.get('per_sq_ft_price'))) *\r\n\t\t\t\t\t\t\tparseFloat(unitVarinatModel.get('super_built_up_area'))\r\n\t\t\tbasicCost = basic_cost.toFixed(2)\r\n\t\t# basicCost = unitModel.get 'selling_amount'\r\n\t\tbasicCost\r\n\r\n\t\r\n\r\n\r\n\r\nclass ApartmentVariantCollection extends Backbone.Collection\r\n\tmodel : ApartmentVariant\r\n\t#set attributes of a Apartment Variant model\r\n\tsetApartmentVariantAttributes:(data)->\r\n\r\n\t\t# @set apartmentApartmentData\r\n\t\tapartmentVariantCollection.reset data\r\n\t\tapartmentVariantMasterCollection.reset data\r\n\r\n\t#set apartment units\r\n\tgetApartmentUnits:->\r\n\t\tunits = []\r\n\t\tnewUnits = []\r\n\t\tapartmentVariantCollection.each (model)->\r\n\t\t\tapartmentUnits = unitCollection.where\r\n\t\t\t\tunit_variant_id : model.get('id')\r\n\t\t\tunits.push  apartmentUnits\r\n\t\tif units.length isnt 0\r\n\t\t\t$.each units[0],(index,value)->\r\n\t\t\t\tunitType = unitTypeMasterCollection.findWhere\r\n\t\t\t\t\t\t\t\t'id' :  value.get('unit_type_id')\r\n\t\t\t\tproperty = window.propertyTypes[unitType.get('property_type_id')]\r\n\t\t\t\tif s.decapitalize(property) == 'apartments'\r\n\t\t\t\t\tnewUnits.push value\r\n\r\n\t\tnewUnits\r\n\r\n\r\n\t#set penthouse units\r\n\tgetPenthouseUnits:->\r\n\t\tunits = []\r\n\t\tunitCollection.each (model)->\r\n\t\t\tunitType = unitTypeMasterCollection.findWhere\r\n\t\t\t\t\t\t\t'id' :  model.get('unit_type_id')\r\n\t\t\tproperty = window.propertyTypes[unitType.get('property_type_id')]\r\n\t\t\tif s.decapitalize(property) == 'penthouses'\r\n\t\t\t\tunits.push model\r\n\t\tunits\r\n\r\n\t#get apartment units\r\n\tgetApartmentMasterUnits:->\r\n\t\tunits = []\r\n\t\tnewUnits = []\r\n\t\tapartmentVariantMasterCollection.each (model)->\r\n\t\t\tapartmentUnits = unitMasterCollection.where\r\n\t\t\t\tunit_variant_id : model.get('id')\r\n\t\t\tunits.push  apartmentUnits\r\n\t\t$.each units,(index,value)->\r\n\t\t\tnewUnits = $.merge(newUnits , value)\r\n\r\n\t\tnewUnits\r\n\r\n\tgetApartmentUnitTypes:->\r\n\t\tunit_types = []\r\n\t\tapartmentVariantMasterCollection.each (item)->\r\n\t\t\tunitTypeModel = unitTypeMasterCollection.findWhere\r\n\t\t\t\t\t\t\t\t'id' : item.get 'unit_type_id'\r\n\t\t\tif $.inArray(item.get('unit_type_id'),unit_types) == -1\r\n\t\t\t\tunit_types.push parseInt unitTypeModel.get 'id'\r\n\t\t\t\t\r\n\t\t\t\t\t\t\r\n\r\n\t\tunit_types\r\n\r\n\tgetApartmentAttributes:->\r\n\t\tattributes = []\r\n\t\ttypes = []\r\n\t\tapartmentVariantMasterCollection.each (item)->\r\n\t\t\t$.each item.get('variant_attributes') , (index,value)->\r\n\t\t\t\tif _.isArray(value)\r\n\t\t\t\t\t$.each value , (ind,val)->\r\n\t\t\t\t\t\tif $.inArray(val,attributes) == -1\r\n\t\t\t\t\t\t\tattributes.push val\r\n\t\t\t\telse\r\n\t\t\t\t\tif $.inArray(value,attributes) == -1\r\n\t\t\t\t\t\tattributes.push value\r\n\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t[attributes]\r\n\r\n\t\r\n\r\nwindow.apartmentVariantCollection  = new ApartmentVariantCollection\r\nwindow.apartmentVariantMasterCollection  = new ApartmentVariantCollection\r\nwindow.apartmentVariant  = new ApartmentVariant"]}