{"version":3,"sources":["frontend/entities/unit.entity.coffee"],"names":[],"mappings":"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","file":"frontend/entities/unit.entity.js","sourceRoot":"/source/","sourcesContent":["#Unit model and Unit collection Definition\nclass Unit extends Backbone.Model\n\n\n\n\t#get the unit details \n\tgetUnitDetails:(unit_id)->\n\t\tid  = parseInt unit_id\n\t\tunit = unitMasterCollection.findWhere \n\t\t\tid :  id \n\t\tunitVariant = 0\n\t\ttype = ''\n\t\tprice = 0\n\t\tattributes = []\n\t\tif bunglowVariantMasterCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = bunglowVariantMasterCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\ttype = 'villa'\n\t\t\tprice = window.bunglowVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\telse if apartmentVariantMasterCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = apartmentVariantMasterCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\tunitTypeModel = unitTypeMasterCollection.findWhere\n\t\t\t\t\t\t'id' : parseInt unitVariant.get('unit_type_id')\n\t\t\ttype = 'apartment'\n\t\t\tif window.propertyTypes[unitTypeModel.get('property_type_id')] == 'Penthouse'\n\t\t\t\t\ttype = 'Penthouse'\n\t\t\t\n\t\t\tprice = window.apartmentVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\telse if plotVariantMasterCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = plotVariantMasterCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\tunitVariant.set 'super_built_up_area' , unitVariant.get 'size'\n\t\t\ttype = 'plot'\n\t\t\tprice = window.plotVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\tunitType = unitTypeMasterCollection.findWhere\n\t\t\t\t\t\t\t'id' :  unit.get('unit_type_id')\n\t\t[unitVariant,unitType,type,price,attributes]\n\n\n\t#get the unit details \n\tgetFilterUnitDetails:(unit_id)->\n\t\tid  = parseInt unit_id\n\t\tunit = unitCollection.findWhere \n\t\t\tid :  id \n\t\tunitVariant = 0\n\t\ttype = ''\n\t\tprice = 0\n\t\tattributes = []\n\t\tif bunglowVariantCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = bunglowVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\ttype = 'villa'\n\t\t\tprice = window.bunglowVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\telse if apartmentVariantCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = apartmentVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\ttype = 'apartment'\n\t\t\tprice = window.apartmentVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\telse if plotVariantCollection.get(unit.get('unit_variant_id')) != undefined\n\t\t\tunitVariant = plotVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : unit.get('unit_variant_id')\n\t\t\tunitVariant.set 'super_built_up_area' , unitVariant.get 'size'\n\t\t\ttype = 'plot'\n\t\t\tprice = window.plotVariant.findUnitPrice(unit)\n\t\t\tattributes = unitVariant.get('variant_attributes')\n\t\tunitType = unitTypeMasterCollection.findWhere\n\t\t\t\t\t\t\t'id' :  unit.get('unit_type_id')\n\t\t[unitVariant,unitType,type,price,attributes]\n\n\n\n\n\n\n\t\nclass UnitCollection extends Backbone.Collection\n\tmodel : Unit\n\n\tgetRecord:->\n\t\t@currentModel\n\n\tsetRecord:(model)->\n\t\t@currentModel = model\n\n\tnext:->\n\t\tunits = _.pluck @.toArray(), 'id'\n\t\tnext = @at(@indexOf(@getRecord()) + 1)\n\t\tif _.isUndefined next\n\t\t\tfirst = _.first units\n\t\t\tif @currentModel.get('id') == first\n\t\t\t\tnext\n\t\t\telse\n\t\t\t\trecord = @findWhere\n\t\t\t\t\t'id' : first\n\t\t\t\trecord\n\t\telse\n\t\t\tnext\n\n\tprev:->\n\t\tunits = _.pluck @.toArray(), 'id'\n\t\tprev = @at(@indexOf(@getRecord()) - 1)\n\t\tif _.isUndefined prev\n\t\t\tlast = _.last units\n\t\t\tif @currentModel.get('id') == last\n\t\t\t\tprev\n\t\t\telse\n\t\t\t\trecord = @findWhere\n\t\t\t\t\t'id' : last\n\t\t\t\trecord\n\t\telse\n\t\t\tprev\n\t\n\n\t#set the attributes of a unit model\n\tsetUnitAttributes:(data)->\n\t\t# @set unitData\n\t\t\n\t\tresponse = @setUnitType(data)\n\t\tunitCollection.reset response\n\t\tunitMasterCollection.reset response\n\t\twindow.unitTempCollection = unitCollection.clone()\n\t\t\n\n\tsetUnitType:(data)->\n\t\t$.each data,(index,value)->\n\t\t\t\n\t\t\tunitVariant = ''\n\t\t\tif bunglowVariantCollection.get(value.unit_variant_id) != undefined\n\t\t\t\tunitVariant = bunglowVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : value.unit_variant_id\n\t\t\tif apartmentVariantCollection.get(value.unit_variant_id) != undefined\n\t\t\t\tunitVariant = apartmentVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : value.unit_variant_id\n\t\t\tif plotVariantCollection.get(value.unit_variant_id) != undefined\n\t\t\t\tunitVariant = plotVariantCollection.findWhere\n\t\t\t\t\t\t\t\t'id' : value.unit_variant_id\n\t\t\t\tunitVariant.set 'super_built_up_area' ,unitVariant.get('size')\n\t\t\t\n\t\t\tunitType = unitTypeCollection.findWhere\n\t\t\t\t\t\t\t'id' :  unitVariant.get('unit_type_id')\n\t\t\tvalue['unit_type_id'] = unitType.get('id')\n\t\t\tvalue['area'] = unitVariant.get('super_built_up_area')\n\t\t\t\n\n\t\tdata\n\n\t\n\n\nwindow.unitCollection  = new UnitCollection\nwindow.unitMasterCollection  = new UnitCollection\nwindow.unit  = new Unit\n"]}