{"version":3,"sources":["frontend/common/common.coffee"],"names":[],"mappings":"AACA;AAAA,MAAA;+BAAA;;AAAA,EAAM,WAAW,CAAC;AAEjB,wCAAA,CAAA;;;;KAAA;;AAAA,+BAAA,QAAA,GAAW,mBAAX,CAAA;;4BAAA;;KAF0C,UAAU,CAAC,SAAtD,CAAA;;AAAA,EAIM,WAAW,CAAC;AAEjB,wCAAA,CAAA;;;;KAAA;;AAAA,+BAAA,UAAA,GAAW,SAAA,GAAA;aACV,IAAC,CAAA,IAAD,CAAM,GAAA,CAAA,WAAe,CAAC,gBAAtB,EADU;IAAA,CAAX,CAAA;;4BAAA;;KAF0C,UAAU,CAAC,iBAJtD,CAAA;;AAAA,EAUA,WAAW,CAAC,YAAZ,GAA2B,SAAA,GAAA;WAE1B,CAAC,CAAC,IAAF,CACC;AAAA,MAAA,IAAA,EAAO,KAAP;AAAA,MACA,GAAA,EAAO,WAAA,GAAY,WAAZ,GAAyB,SAAzB,GAAmC,WAD1C;AAAA,MAEA,KAAA,EAAQ,KAFR;AAAA,MAGA,OAAA,EAAS,SAAC,QAAD,GAAA;AAER,QAAA,QAAA,GAAW,MAAM,CAAC,YAAP,CAAoB,QAApB,CAAX,CAAA;AAAA,QACA,QAAA,GAAW,QAAQ,CAAC,IADpB,CAAA;AAAA,QAEA,wBAAwB,CAAC,2BAAzB,CAAqD,QAAQ,CAAC,gBAA9D,CAFA,CAAA;AAAA,QAGA,QAAQ,CAAC,qBAAT,CAA+B,QAAQ,CAAC,QAAxC,CAHA,CAAA;AAAA,QAIA,cAAc,CAAC,iBAAf,CAAiC,QAAQ,CAAC,KAA1C,CAJA,CAAA;AAAA,QAKA,kBAAkB,CAAC,qBAAnB,CAAyC,QAAQ,CAAC,UAAlD,CALA,CAAA;AAAA,QAMA,kBAAkB,CAAC,qBAAnB,CAAyC,QAAQ,CAAC,SAAlD,CANA,CAAA;AAAA,QAOA,0BAA0B,CAAC,6BAA3B,CAAyD,QAAQ,CAAC,kBAAlE,CAPA,CAAA;eAQA,qBAAqB,CAAC,wBAAtB,CAA+C,QAAQ,CAAC,YAAxD,EAVQ;MAAA,CAHT;AAAA,MAeA,KAAA,EAAO,SAAC,QAAD,GAAA;AACN,QAAA,IAAC,CAAA,MAAD,GAAe,IAAA,UAAU,CAAC,MAAX,CAAkB;AAAA,UAAA,EAAA,EAAK,mBAAL;SAAlB,CAAf,CAAA;eACI,IAAA,WAAW,CAAC,WAAZ,CAAwB;AAAA,UAAA,MAAA,EAAS,IAAC,CAAA,MAAV;SAAxB,EAFE;MAAA,CAfP;KADD,EAF0B;EAAA,CAV3B,CAAA;;AAAA,EAkCA,WAAW,CAAC,gBAAZ,GAA+B,SAAA,GAAA;AAC9B,QAAA,kBAAA;AAAA,IAAA,MAAA,GAAS,EAAT,CAAA;AAAA,IACA,MAAM,CAAC,IAAP,CACC;AAAA,MAAA,MAAA,EAAU,UAAV;AAAA,MACA,OAAA,EAAS,wBAAwB,CAAC,eAAzB,CAAA,CADT;KADD,CADA,CAAA;AAAA,IAIA,MAAM,CAAC,IAAP,CACC;AAAA,MAAA,MAAA,EAAU,UAAV;AAAA,MACA,OAAA,EAAS,0BAA0B,CAAC,iBAA3B,CAAA,CADT;KADD,CAJA,CAAA;AAAA,IAOA,OAAO,CAAC,GAAR,CAAY,MAAZ,CAPA,CAAA;AAAA,IAQA,UAAA,GAAa,CAAC,CAAC,GAAF,CAAM,MAAN,EAAe,SAAC,IAAD,GAAA;AAC3B,aAAO,QAAA,CAAS,IAAI,CAAC,KAAK,CAAC,MAApB,CAAP,CAD2B;IAAA,CAAf,CARb,CAAA;WAWA,WAZ8B;EAAA,CAlC/B,CAAA;;AAAA,EAkDA,WAAW,CAAC,iBAAZ,GAAgC,SAAA,GAAA;AAC/B,IAAA,WAAW,CAAC,YAAZ,CAAA,CAAA,CAAA;AACA,IAAA,IAAG,MAAM,CAAC,IAAP,CAAY,OAAO,CAAC,GAAR,CAAY,gBAAZ,CAAZ,CAA0C,CAAC,MAA3C,KAAuD,CAA1D;AACC,MAAA,WAAW,CAAC,QAAZ,CAAqB,aAArB,EAAqC,IAArC,CAAA,CAAA;aACA,WAAW,CAAC,MAAM,CAAC,UAAnB,CAAA,EAFD;KAAA,MAAA;AAIC,MAAA,WAAW,CAAC,QAAZ,CAAqB,eAArB,EAAuC,IAAvC,CAAA,CAAA;aACA,WAAW,CAAC,MAAM,CAAC,UAAnB,CAAA,EALD;KAF+B;EAAA,CAlDhC,CAAA;;AAAA,EA4DA,WAAW,CAAC,aAAZ,GAA4B,SAAA,GAAA;AAC3B,QAAA,UAAA;WAAA,UAAA,GAAa,WAAW,CAAC,gBAAZ,CAAA,EADc;EAAA,CA5D5B,CAAA;;AAAA,EAkEA,MAAM,CAAC,YAAP,GAAsB,SAAC,QAAD,GAAA;WACrB,CAAC,CAAC,IAAF,CAAO,QAAP,EAAiB,SAAC,KAAD,EAAO,KAAP,GAAA;aAChB,CAAC,CAAC,GAAF,CAAM,KAAN,EAAY,SAAC,IAAD,GAAA;eAEX,CAAC,CAAC,IAAF,CAAO,IAAP,EAAa,SAAC,GAAD,EAAK,GAAL,GAAA;AACZ,iBAAO,QAAA,CAAS,GAAT,CAAP,CADY;QAAA,CAAb,EAFW;MAAA,CAAZ,EADgB;IAAA,CAAjB,EADqB;EAAA,CAlEtB,CAAA;;AAAA,EA2EA,MAAM,CAAC,kBAAP,GAA4B,SAAC,GAAD,GAAA;AAC3B,IAAA,IAAI,GAAA,IAAO,QAAX;AACC,MAAA,GAAA,GAAM,CAAC,GAAA,GAAI,QAAL,CAAc,CAAC,OAAf,CAAuB,CAAvB,CAAA,GAA4B,KAAlC,CADD;KAAA,MAEK,IAAI,GAAA,IAAO,MAAX;AACJ,MAAA,GAAA,GAAM,CAAC,GAAA,GAAI,MAAL,CAAY,CAAC,OAAb,CAAqB,CAArB,CAAA,GAA0B,MAAhC,CADI;KAAA,MAEA,IAAG,GAAA,IAAO,IAAV;AACJ,MAAA,GAAA,GAAM,CAAC,GAAA,GAAI,IAAL,CAAU,CAAC,OAAX,CAAmB,CAAnB,CAAA,GAAwB,IAA9B,CADI;KAJL;WAMA,IAP2B;EAAA,CA3E5B,CAAA;;AAAA,EAsFA,MAAM,CAAC,aAAP,GAAuB,SAAC,GAAD,GAAA;AAEtB,IAAA,CAAA,CAAE,QAAF,CAAW,CAAC,WAAZ,CAAwB,MAAxB,CAAA,CAAA;WACA,CAAA,CAAE,QAAF,CAAW,CAAC,WAAZ,CAAwB,KAAxB,EAA+B,GAA/B,EAHsB;EAAA,CAtFvB,CAAA;;AAAA,EA6FA,WAAW,CAAC,aAAZ,GAA4B,SAAA,GAAA;AAC3B,QAAA,kBAAA;AAAA,IAAA,MAAA,GAAS,EAAT,CAAA;AACA,IAAA,IAAG,wBAAwB,CAAC,eAAzB,CAAA,CAA0C,CAAC,MAA3C,KAAqD,CAAxD;AACC,MAAA,MAAM,CAAC,IAAP,CACC;AAAA,QAAA,MAAA,EAAU,CAAC,CAAC,UAAF,CAAa,QAAb,CAAV;AAAA,QACA,OAAA,EAAS,wBAAwB,CAAC,eAAzB,CAAA,CADT;OADD,CAAA,CADD;KADA;AAKA,IAAA,IAAG,kBAAkB,CAAC,OAAnB,CAAA,CAA4B,CAAC,MAA7B,KAAuC,CAA1C;AACC,MAAA,MAAM,CAAC,IAAP,CACC;AAAA,QAAA,MAAA,EAAU,CAAC,CAAC,UAAF,CAAa,WAAb,CAAV;AAAA,QACA,OAAA,EAAS,kBAAkB,CAAC,OAAnB,CAAA,CADT;OADD,CAAA,CADD;KALA;AAAA,IASA,UAAA,GAAa,CAAC,CAAC,GAAF,CAAM,MAAN,EAAe,SAAC,IAAD,GAAA;AAC3B,aAAO,QAAA,CAAS,IAAI,CAAC,KAAK,CAAC,MAApB,CAAP,CAD2B;IAAA,CAAf,CATb,CAAA;WAaA,OAd2B;EAAA,CA7F5B,CAAA;;AAAA,EA6GA,WAAW,CAAC,iBAAZ,GAAgC,SAAA,GAAA;WAC/B,CAAA,CAAE,QAAF,CAAW,CAAC,IAAZ,CAAiB,SAAC,GAAD,EAAK,IAAL,GAAA;AAChB,UAAA,sBAAA;AAAA,MAAA,OAAO,CAAC,GAAR,CAAY,EAAA,GAAK,QAAA,CAAS,IAAI,CAAC,EAAd,CAAjB,CAAA,CAAA;AAAA,MACA,IAAA,GAAO,cAAc,CAAC,SAAf,CACN;AAAA,QAAA,EAAA,EAAM,EAAN;OADM,CADP,CAAA;AAGA,MAAA,IAAG,CAAA,CAAG,CAAC,WAAF,CAAc,IAAd,CAAL;AACC,QAAA,YAAA,GAAe,IAAI,CAAC,GAAL,CAAS,cAAT,CAAf,CAAA;AAAA,QACA,YAAA,GAAe,CAAC,CAAC,YAAF,CAAe,YAAf,CADf,CAAA;eAEA,CAAA,CAAE,GAAA,GAAI,EAAN,CAAS,CAAC,IAAV,CAAe,OAAf,EAAwB,cAAA,GAAe,YAAvC,EAHD;OAJgB;IAAA,CAAjB,EAD+B;EAAA,CA7GhC,CAAA;AAAA","file":"frontend/common/common.js","sourceRoot":"/source/","sourcesContent":["#No Found Controller and veiw\r\nclass CommonFloor.NothingFoundView extends Marionette.ItemView\r\n\t\r\n\ttemplate : '#noFound-template'\r\n\r\nclass CommonFloor.NothingFoundCtrl extends Marionette.RegionController\r\n\r\n\tinitialize:->\r\n\t\t@show new CommonFloor.NothingFoundView\r\n\r\n#api required to load second step\r\nCommonFloor.loadJSONData = ()->\r\n\r\n\t$.ajax\r\n\t\ttype : 'GET',\r\n\t\turl  : BASERESTURL+'/project/'+\tPROJECTID+'/step-two'\r\n\t\tasync : false\r\n\t\tsuccess :(response)->\r\n\t\t\t#parsing the integer fields \r\n\t\t\tresponse = window.convertToInt(response)\r\n\t\t\tresponse = response.data\r\n\t\t\tbunglowVariantCollection.setBunglowVariantAttributes(response.bunglow_variants)\r\n\t\t\tsettings.setSettingsAttributes(response.settings)\r\n\t\t\tunitCollection.setUnitAttributes(response.units)\r\n\t\t\tunitTypeCollection.setUnitTypeAttributes(response.unit_types)\r\n\t\t\tbuildingCollection.setBuildingAttributes(response.buildings)\r\n\t\t\tapartmentVariantCollection.setApartmentVariantAttributes(response.apartment_variants)\r\n\t\t\tfloorLayoutCollection.setFloorLayoutAttributes(response.floor_layout)\r\n\t\t\t\r\n\t\terror :(response)->\r\n\t\t\t@region =  new Marionette.Region el : '#noFound-template'\r\n\t\t\tnew CommonFloor.ProjectCtrl region : @region\r\n\t\t\t\r\n\r\n#find the property type with maximum number of units\r\nCommonFloor.propertyMaxUnits = ()->\r\n\tRouter = []\r\n\tRouter.push \r\n\t\t'type'  : 'bunglows'\r\n\t\t'count' :bunglowVariantCollection.getBunglowUnits()\r\n\tRouter.push \r\n\t\t'type'  : 'building'\r\n\t\t'count' :apartmentVariantCollection.getApartmentUnits()\r\n\tconsole.log Router\r\n\tcontroller = _.max Router , (item)->\r\n\t\treturn parseInt item.count.length\r\n\r\n\tcontroller\t\r\n\r\n\t\r\n#function to load the default controller fro master view\r\nCommonFloor.checkPropertyType = ()->\r\n\tCommonFloor.loadJSONData()\r\n\tif Object.keys(project.get('project_master')).length  ==  0\r\n\t\tCommonFloor.navigate '#/list-view' , true\r\n\t\tCommonFloor.router.storeRoute()\r\n\telse\r\n\t\tCommonFloor.navigate '#/master-view' , true\r\n\t\tCommonFloor.router.storeRoute()\r\n\r\n#function to load the default controller for list view \r\nCommonFloor.checkListView = ()->\r\n\tcontroller = CommonFloor.propertyMaxUnits()\r\n\t#CommonFloor.navigate '#/list-view/'+controller.type , true\r\n\r\n\r\n#funtion to convert string into integers\r\nwindow.convertToInt = (response)->\r\n\t$.each response ,(index,value)->\r\n\t\t$.map(value,(item)->\r\n\r\n\t\t\t$.each item ,(ind,val)->\r\n\t\t\t\treturn parseInt val\r\n\t)\r\n\r\n#function to convert value into price format\r\nwindow.numDifferentiation = (val)->\r\n\tif (val >= 10000000) \r\n\t\tval = (val/10000000).toFixed(2) + ' Cr'\r\n\telse if (val >= 100000) \r\n\t\tval = (val/100000).toFixed(2) + ' Lac'\r\n\telse if(val >= 1000) \r\n\t\tval = (val/1000).toFixed(2) + ' K'\r\n\tval\r\n\t   \r\n\r\n#function to convert value into price format\t\t\r\nwindow.convertRupees = (val)->\r\n\r\n\t$('#price').autoNumeric('init')\r\n\t$('#price').autoNumeric('set', val)\r\n\r\n \r\n#Get all the property type with the count of units\r\nCommonFloor.propertyTypes = ()->\r\n\tRouter = []\r\n\tif bunglowVariantCollection.getBunglowUnits().length != 0\r\n\t\tRouter.push \r\n\t\t\t'type'  : s.capitalize 'villas'\r\n\t\t\t'count' :bunglowVariantCollection.getBunglowUnits()\r\n\tif buildingCollection.toArray().length != 0\r\n\t\tRouter.push \r\n\t\t\t'type'  : s.capitalize 'buildings'\r\n\t\t\t'count' :buildingCollection.toArray()\r\n\tcontroller = _.max Router , (item)->\r\n\t\treturn parseInt item.count.length\r\n\r\n\r\n\tRouter\r\n\r\nCommonFloor.applyVillaClasses = ()->\r\n\t$('.villa').each (ind,item)->\r\n\t\tconsole.log id = parseInt item.id\r\n\t\tunit = unitCollection.findWhere \r\n\t\t\tid :  id \r\n\t\tif ! _.isUndefined unit \r\n\t\t\tavailability = unit.get('availability')\r\n\t\t\tavailability = s.decapitalize(availability)\r\n\t\t\t$('#'+id).attr('class' ,'layer villa '+availability) \r\n\r\n\r\n\r\n\r\n\r\n"]}